"use strict";(self.webpackChunktimer=self.webpackChunktimer||[]).push([[519],{5519:(wi,H,c)=>{c.r(H),c.d(H,{ProjetoModule:()=>ki});var p=c(8583),q=c(8239),u=c(3032),m=c(7117),J=c(3430),Z=c(3525),L=c(4782),t=c(7716),l=c(3679),N=c(1843),v=c(4655),j=c(789),P=c(2522),rt=c(3968),A=c(1095),k=c(1436),x=c(6627),h=c(8295),w=c(7441),S=c(9983),y=c(2458),Q=c(3738);let st=(()=>{class a{transform(e){return"0"==e?"Proposta":"1"==e?"Em Aberto":"2"==e?"Em Andamento":"3"==e?"Encerrado":"4"==e?"Suspenso":"5"==e?"Cancelado":"Proposta"}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275pipe=t.Yjl({name:"situacaoProjeto",type:a,pure:!0}),a})(),lt=(()=>{class a{transform(e){return"0"==e?"Em Aberto":"1"==e?"Em Andamento":"2"==e?"Em Finalizado":"3"==e?"Em Atraso":"Em Aberto"}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275pipe=t.Yjl({name:"situacaoPadrao",type:a,pure:!0}),a})();function ct(a,n){if(1&a&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function dt(a,n){if(1&a&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function ut(a,n){if(1&a&&(t.TgZ(0,"div"),t.TgZ(1,"mat-card-content"),t.TgZ(2,"mat-label",25),t._uU(3,"Contrato:"),t.qZA(),t.TgZ(4,"mat-label",26),t._uU(5),t.qZA(),t.TgZ(6,"mat-label",27),t._uU(7,"Descri\xe7\xe3o:"),t.qZA(),t.TgZ(8,"mat-label",26),t._uU(9),t.qZA(),t.TgZ(10,"mat-label",27),t._uU(11,"Situa\xe7\xe3o:"),t.qZA(),t.TgZ(12,"mat-label",26),t._uU(13),t.ALo(14,"situacaoProjeto"),t.qZA(),t.TgZ(15,"mat-label",27),t._uU(16,"Planejamento:"),t.qZA(),t.TgZ(17,"mat-label",26),t._uU(18),t.ALo(19,"situacaoPadrao"),t.qZA(),t.TgZ(20,"mat-label",27),t._uU(21,"Execu\xe7\xe3o:"),t.qZA(),t.TgZ(22,"mat-label",26),t._uU(23),t.ALo(24,"situacaoPadrao"),t.qZA(),t.qZA(),t.TgZ(25,"mat-card-content"),t.TgZ(26,"mat-label",25),t._uU(27,"Data Proposta:"),t.qZA(),t.TgZ(28,"mat-label",26),t._uU(29),t.ALo(30,"date"),t.qZA(),t.TgZ(31,"mat-label",27),t._uU(32,"Data Contrato:"),t.qZA(),t.TgZ(33,"mat-label",26),t._uU(34),t.ALo(35,"date"),t.qZA(),t.TgZ(36,"mat-label",27),t._uU(37,"Data Encerramento:"),t.qZA(),t.TgZ(38,"mat-label",26),t._uU(39),t.ALo(40,"date"),t.qZA(),t.qZA(),t.TgZ(41,"mat-card-content"),t.TgZ(42,"mat-label",25),t._uU(43,"Diretor:"),t.qZA(),t.TgZ(44,"mat-label",26),t._uU(45),t.qZA(),t.TgZ(46,"mat-label",27),t._uU(47,"Cliente:"),t.qZA(),t.TgZ(48,"mat-label",26),t._uU(49),t.qZA(),t.qZA(),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(5),t.Oqu(e.id),t.xp6(4),t.Oqu(e.descricao),t.xp6(4),t.Oqu(t.lcZ(14,10,e.status)),t.xp6(5),t.Oqu(t.lcZ(19,12,e.status_pl)),t.xp6(5),t.Oqu(t.lcZ(24,14,e.status_ex)),t.xp6(6),t.Oqu(t.xi3(30,16,e.dataprop,"dd/MM/yyyy")),t.xp6(5),t.Oqu(t.xi3(35,19,e.dataproj,"dd/MM/yyyy")),t.xp6(5),t.Oqu(t.xi3(40,22,e.dataenc,"dd/MM/yyyy")),t.xp6(6),t.Oqu(e.diretor_razao),t.xp6(4),t.Oqu(e.cliente_razao)}}function pt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"mat-card",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,r=t.oxw();return r.escolha(o,r.getAcoes().Consulta)}),t.TgZ(1,"mat-card-actions"),t.TgZ(2,"span",19),t.TgZ(3,"div",20),t._UZ(4,"div",21),t.qZA(),t.TgZ(5,"button",22),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw().escolha(o,99)}),t.TgZ(6,"mat-icon"),t._uU(7,"assignment"),t.qZA(),t.qZA(),t.TgZ(8,"button",23),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,r=t.oxw();return r.escolha(o,r.getAcoes().Edicao)}),t.TgZ(9,"mat-icon"),t._uU(10,"edit"),t.qZA(),t.qZA(),t.TgZ(11,"button",23),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,r=t.oxw();return r.escolha(o,r.getAcoes().Exclusao)}),t.TgZ(12,"mat-icon"),t._uU(13,"delete"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(14,ut,50,25,"div",24),t.qZA()}if(2&a){const e=t.oxw().$implicit,i=t.oxw();t.xp6(4),t.Q6J("ngStyle",i.setStyle(e,"P")),t.xp6(4),t.Q6J("matTooltip",i.getTexto().alterar),t.xp6(3),t.Q6J("matTooltip",i.getTexto().excluir),t.xp6(3),t.Q6J("ngIf",0!=e.id)}}function _t(a,n){if(1&a&&(t.TgZ(0,"div",16),t.YNc(1,pt,15,4,"mat-card",17),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Q6J("ngIf",0!=e.id)}}let mt=(()=>{class a{constructor(e,i,o,r){this.formBuilder=e,this.projetosServices=i,this.router=o,this.appSnackBar=r,this.durationInSeconds=3,this.id_empresa=1,this.projetos=[],this.erro="",this.opcoesOrdenacao=["C\xf3digo","Descricao"],this.opcoesCampo=["C\xf3digo","Descri\xe7\xe3o"],this.controlePaginas=new J.e(0,0),this.tamPagina=50,this.parametros=e.group({ordenacao:[null],campo:[null],filtro:[null],grupo:[]}),this.inclusao=new Z.w,this.inclusao.id_empresa=1,this.inclusao.user_insert=1,this.inclusao.user_update=0,this.setValues()}ngOnInit(){this.getProjetosContador()}ngOnDestroy(){var e,i,o;null===(e=this.inscricaoGetAll)||void 0===e||e.unsubscribe(),null===(i=this.inscricaoGetFiltro)||void 0===i||i.unsubscribe(),null===(o=this.inscricaoGetGrupo)||void 0===o||o.unsubscribe()}escolha(e,i){this.router.navigate(99==i?["projetos/anexaratividade",e.id_empresa,e.id,"NULL"]:["projetos/projeto",e.id_empresa,e.id,i])}getAcoes(){return u.I}getProjetos(){let e=new L.m;if(e.id_empresa=1,"C\xf3digo"==this.parametros.value.campo){let i=parseInt(this.parametros.value.filtro,10);e.id=isNaN(i)?0:i}"Descri\xe7\xe3o"==this.parametros.value.campo&&(e.descricao=this.parametros.value.filtro.toUpperCase()),e.orderby=this.parametros.value.ordenacao,e.pagina=this.controlePaginas.getPaginalAtual(),this.inscricaoGetFiltro=this.projetosServices.getProjetos_01(e).subscribe(i=>{this.projetos=i},i=>{if("Nehuma Informa\xe7\xe3o Para Esta Consulta."==i.error.message){let o=new Z.w;o.id_empresa=1,o.id=0,o.user_insert=1,this.projetos=[],this.projetos.push(o),this.appSnackBar.openSuccessSnackBar("Nenhuma Informa\xe7\xe3o Encontrada Para Esta Consulta!","OK")}else this.projetos=[]})}getProjetosContador(){let e=new L.m;if(e.id_empresa=1,"C\xf3digo"==this.parametros.value.campo){let i=parseInt(this.parametros.value.filtro,10);e.id=isNaN(i)?0:i}"Descri\xe7\xe3o"==this.parametros.value.campo&&(e.descricao=this.parametros.value.filtro.toUpperCase()),e.orderby=this.parametros.value.ordenacao,e.contador="S",this.inscricaoGetFiltro=this.projetosServices.getProjetos_01(e).subscribe(i=>{this.controlePaginas=new J.e(this.tamPagina,0==i.total?1:i.total),this.getProjetos()},i=>{"Nehuma Informa\xe7\xe3o Para Esta Consulta."==i.error.message?(this.controlePaginas=new J.e(this.tamPagina,0),this.appSnackBar.openSuccessSnackBar("Nenhuma Informa\xe7\xe3o Encontrada Para Esta Consulta!","OK")):(this.controlePaginas=new J.e(this.tamPagina,0),this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Projetos ${i.error.tabela} - ${i.error.erro} - ${i.error.message}`,"OK"))})}openSnackBar_Err(e,i){}openSnackBar_OK(e,i){var o=this;return(0,q.Z)(function*(){yield o.delay(1e3*o.durationInSeconds)})()}delay(e){return new Promise(i=>setTimeout(i,e))}setValues(){this.parametros.setValue({ordenacao:"C\xf3digo",campo:"C\xf3digo",filtro:"",grupo:1})}getTexto(){return m.fd}onChangePage(){this.getProjetos()}setStyle(e,i){let o={"background-color":"white"};return console.log("nivel plan",e.nivelplan),"P"==i?(1==e.nivelplan&&(o={"background-color":"green"}),2==e.nivelplan&&(o={"background-color":"yellow"}),3==e.nivelplan&&(o={"background-color":"red"}),4==e.nivelplan&&(o={"background-color":"black"})):(1==e.nivelexec&&(o={"background-color":"green"}),2==e.nivelexec&&(o={"background-color":"yellow"}),3==e.nivelexec&&(o={"background-color":"red"}),4==e.nivelexec&&(o={"background-color":"black"})),o}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(l.qu),t.Y36(N.T),t.Y36(v.F0),t.Y36(j.W))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-crud-projeto"]],decls:29,vars:5,consts:[[1,"div-barra"],[1,"example-spacer"],[3,"controle","changePage"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Atualizar","matTooltipPosition","above",1,"example-icon",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Novo Contrato","matTooltipPosition","above",1,"example-icon",3,"click"],[1,"parametros"],["autocomplete","off",1,"col-med-4",3,"formGroup"],["field","","appearance","outline",1,"col-max"],["formControlName","ordenacao"],[3,"value",4,"ngFor","ngForOf"],["formControlName","campo"],["appearance","outline",1,"column-span-2"],["matInput","","formControlName","filtro"],[1,"Browse"],["class","linha",4,"ngFor","ngForOf"],[3,"value"],[1,"linha"],["class","example-card",3,"click",4,"ngIf"],[1,"example-card",3,"click"],[1,"button-container-right"],[1,"linha-status"],[1,"circulo",3,"ngStyle"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Anexar Atividades","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above",3,"matTooltip","click"],[4,"ngIf"],[1,"labelTitleFirst"],[1,"labelData"],[1,"labelTitle"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"span",1),t._uU(3,"Contratos: "),t.qZA(),t.TgZ(4,"app-navegator",2),t.NdJ("changePage",function(){return i.onChangePage()}),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return i.getProjetos()}),t.TgZ(6,"mat-icon"),t._uU(7,"rotate_right"),t.qZA(),t.qZA(),t.TgZ(8,"button",4),t.NdJ("click",function(){return i.escolha(i.inclusao,i.getAcoes().Inclusao)}),t.TgZ(9,"mat-icon"),t._uU(10,"add_circle_outline"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",5),t.TgZ(12,"form",6),t.TgZ(13,"mat-form-field",7),t.TgZ(14,"mat-label"),t._uU(15,"Ordena\xe7\xe3o"),t.qZA(),t.TgZ(16,"mat-select",8),t.YNc(17,ct,2,2,"mat-option",9),t.qZA(),t.qZA(),t.TgZ(18,"mat-form-field",7),t.TgZ(19,"mat-label"),t._uU(20,"Pesquisar Por"),t.qZA(),t.TgZ(21,"mat-select",10),t.YNc(22,dt,2,2,"mat-option",9),t.qZA(),t.qZA(),t.TgZ(23,"mat-form-field",11),t.TgZ(24,"mat-label"),t._uU(25,"Descri\xe7\xe3o"),t.qZA(),t._UZ(26,"input",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",13),t.YNc(28,_t,2,1,"div",14),t.qZA()),2&e&&(t.xp6(4),t.Q6J("controle",i.controlePaginas),t.xp6(8),t.Q6J("formGroup",i.parametros),t.xp6(5),t.Q6J("ngForOf",i.opcoesOrdenacao),t.xp6(5),t.Q6J("ngForOf",i.opcoesCampo),t.xp6(6),t.Q6J("ngForOf",i.projetos))},directives:[P.Ye,rt.J,A.lW,k.gM,x.Hw,l._Y,l.JL,l.sg,h.KE,h.hX,w.gD,l.JJ,l.u,p.sg,S.Nt,l.Fj,y.ey,p.O5,Q.a8,Q.hq,p.PC,Q.dn],pipes:[st,lt,p.uU],styles:[""]}),a})();var B=c(6746),F=c(6468),_=c(2238);class V{constructor(){this.titulo="",this.texto="",this.titulo_data1="Data Inicial:",this.dataInicial=new Date,this.titulo_data2="Data Final:",this.dataFinal=new Date,this.processar=!1,this.justificativa="",this.dataHota=new Date,this.usuarioNome="",this.temJustificativa=!0}}var G=c(9267),C=c(3220);function ht(a,n){if(1&a&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(e.getMensafield("justificativa"))}}function gt(a,n){if(1&a&&(t.TgZ(0,"mat-form-field",15),t.TgZ(1,"mat-label"),t._uU(2,"Justificativa"),t.qZA(),t._UZ(3,"textarea",16),t.YNc(4,ht,2,1,"mat-error",17),t.qZA()),2&a){const e=t.oxw();let i;t.xp6(4),t.Q6J("ngIf","INVALID"==(null==(i=e.formulario.get("justificativa"))?null:i.status)&&e.touchedOrDirty("justificativa"))}}function ft(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw().actionFunction()}),t.TgZ(1,"mat-icon"),t._uU(2,"check"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Gravar"),t.qZA(),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("mat-dialog-close",e.data)}}let K=(()=>{class a{constructor(e,i,o){this.formBuilder=e,this.dialogRef=i,this.data=o,this.formulario=e.group({dataInicial:[],dataFinal:[],justificativa:[{value:""},[(0,G.S)(5,200,o.temJustificativa)]]})}ngOnInit(){this.setValue()}setValue(){this.formulario.setValue({dataInicial:this.data.dataInicial,dataFinal:this.data.dataFinal,justificativa:this.data.justificativa})}actionFunction(){this.data.processar=!0,this.data.dataInicial=this.formulario.value.dataInicial,this.data.dataFinal=this.formulario.value.dataFinal,this.data.temJustificativa&&(this.data.justificativa=this.formulario.value.justificativa),this.closeModal()}closeModal(){this.dialogRef.close()}touchedOrDirty(e){var i,o;return!(!(null===(i=this.formulario.get(e))||void 0===i?void 0:i.touched)&&!(null===(o=this.formulario.get(e))||void 0===o?void 0:o.dirty))}getValidfield(e){var i,o;return(null===(o=null===(i=this.formulario.get(e))||void 0===i?void 0:i.errors)||void 0===o?void 0:o.ValidatorStringLen)&&this.touchedOrDirty(e)}getMensafield(e){var i,o;return null===(o=null===(i=this.formulario.get(e))||void 0===i?void 0:i.errors)||void 0===o?void 0:o.message}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(l.qu),t.Y36(_.so),t.Y36(_.WI))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-periodo-dialog"]],decls:33,vars:15,consts:[["autocomplete","off",3,"formGroup"],[1,"col-med-2"],["appearance","outline",1,"col-max"],["matInput","","formControlName","dataInicial",3,"matDatepicker"],["matSuffix","",3,"for"],["inicialDatePicker",""],["matInput","","formControlName","dataFinal",3,"matDatepicker"],["finalDatePicker",""],["class","full-width","appearance","outline",4,"ngIf"],[1,"button-container-right"],["mat-raised-button","","color","accent","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","click",4,"ngIf"],[1,"button-container-left"],["color","accent"],["color","primary"],["appearance","outline",1,"full-width"],["matInput","","formControlName","justificativa","oninput","this.value = this.value.toUpperCase()"],[4,"ngIf"],["mat-raised-button","","color","primary",3,"mat-dialog-close","click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"h1"),t._uU(1),t.qZA(),t.TgZ(2,"form",0),t.TgZ(3,"div",1),t.TgZ(4,"mat-form-field",2),t.TgZ(5,"mat-label"),t._uU(6),t.qZA(),t._UZ(7,"input",3),t._UZ(8,"mat-datepicker-toggle",4),t._UZ(9,"mat-datepicker",null,5),t.qZA(),t.TgZ(11,"mat-form-field",2),t.TgZ(12,"mat-label"),t._uU(13),t.qZA(),t._UZ(14,"input",6),t._UZ(15,"mat-datepicker-toggle",4),t._UZ(16,"mat-datepicker",null,7),t.qZA(),t.qZA(),t.YNc(18,gt,5,1,"mat-form-field",8),t.TgZ(19,"div",9),t.TgZ(20,"button",10),t.NdJ("click",function(){return i.closeModal()}),t.TgZ(21,"mat-icon"),t._uU(22,"cancel"),t.qZA(),t.TgZ(23,"span"),t._uU(24,"Cancelar"),t.qZA(),t.qZA(),t.YNc(25,ft,5,1,"button",11),t.qZA(),t.TgZ(26,"div",12),t.TgZ(27,"mat-label",13),t._uU(28),t.ALo(29,"date"),t.qZA(),t.qZA(),t.TgZ(30,"div",12),t.TgZ(31,"mat-label",14),t._uU(32),t.qZA(),t.qZA(),t.qZA()),2&e){const o=t.MAs(10),r=t.MAs(17);t.xp6(1),t.Oqu(i.data.titulo),t.xp6(1),t.Q6J("formGroup",i.formulario),t.xp6(4),t.Oqu(i.data.titulo_data1),t.xp6(1),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(5),t.Oqu(i.data.titulo_data2),t.xp6(1),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(3),t.Q6J("ngIf",i.data.temJustificativa),t.xp6(7),t.Q6J("ngIf",i.formulario.valid),t.xp6(3),t.hij("Hora: ",t.xi3(29,12,i.data.dataHota,"dd-MM-yyyy HH:mm:ss"),""),t.xp6(4),t.hij("Respons\xe1vel:",i.data.usuarioNome,"")}},directives:[l._Y,l.JL,l.sg,h.KE,h.hX,S.Nt,l.Fj,C.hl,l.JJ,l.u,C.nW,h.R9,C.Mq,p.O5,A.lW,x.Hw,h.TO,_.ZT],pipes:[p.uU],styles:["h1[_ngcontent-%COMP%]{text-align:left;font-family:Arial,Helvetica,sans-serif;font-size:x-large;color:#00f}.full-width[_ngcontent-%COMP%]{width:100%}"]}),a})();var M=c(1209),z=c(6940),U=c(4590),T=c(3935);function vt(a,n){if(1&a&&(t.TgZ(0,"button",28),t.TgZ(1,"mat-icon"),t._uU(2,"calendar_today"),t.qZA(),t.qZA()),2&a){t.oxw();const e=t.MAs(7);t.Q6J("matMenuTriggerFor",e)}}function bt(a,n){if(1&a&&(t.TgZ(0,"mat-option",32),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.razao," ")}}function Zt(a,n){if(1&a&&(t.TgZ(0,"mat-form-field",29),t.TgZ(1,"mat-label"),t._uU(2,"Diretor"),t.qZA(),t.TgZ(3,"mat-select",30),t.YNc(4,bt,2,2,"mat-option",31),t.qZA(),t.qZA()),2&a){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.diretores)}}function At(a,n){if(1&a&&(t.TgZ(0,"mat-form-field",29),t.TgZ(1,"mat-label"),t._uU(2,"Diretor"),t.qZA(),t._UZ(3,"input",33),t.qZA()),2&a){const e=t.oxw();t.xp6(3),t.Q6J("readonly",e.readOnly)}}function xt(a,n){if(1&a&&(t.TgZ(0,"mat-option",32),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.razao," ")}}function Tt(a,n){if(1&a&&(t.TgZ(0,"mat-form-field",29),t.TgZ(1,"mat-label"),t._uU(2,"Cliente"),t.qZA(),t.TgZ(3,"mat-select",34),t.YNc(4,xt,2,2,"mat-option",31),t.qZA(),t.qZA()),2&a){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.clientes)}}function Ct(a,n){if(1&a&&(t.TgZ(0,"mat-form-field",29),t.TgZ(1,"mat-label"),t._uU(2,"Cliente"),t.qZA(),t._UZ(3,"input",35),t.qZA()),2&a){const e=t.oxw();t.xp6(3),t.Q6J("readonly",e.readOnly)}}function qt(a,n){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"Raz\xe3o - No m\xednimo 03 letras e no m\xe1ximo 50 letras"),t.qZA())}function St(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",36),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSubmit()}),t._uU(1),t.qZA()}if(2&a){const e=t.oxw();t.xp6(1),t.Oqu(e.acao)}}let jt=(()=>{class a{constructor(e,i,o,r,s,d,g,b,f){this.formBuilder=e,this.projetosService=i,this.usuariosService=o,this.clientesService=r,this.globalService=s,this.route=d,this.router=g,this.justificaticaPeriodoDialog=b,this.appSnackBar=f,this.projeto=new Z.w,this.diretores=[],this.clientes=[],this.acao="Sem Defini\xe7\xe3o",this.idAcao=u.I.Inclusao,this.readOnly=!0,this.durationInSeconds=2,this.labelCadastro="",this.formulario=e.group({id:[{value:"",disabled:!0}],descricao:[{value:""},[l.kI.required,l.kI.minLength(3),l.kI.maxLength(50)]],id_diretor:[],diretor_razao:[],id_cliente:[],cliente_razao:[],dataprop:[],dataproj:[],dataenc:[],horasve:[],horasplan:[],horasexec:[],horasdir:[],status:[]}),this.projeto=new Z.w,this.inscricaoRota=d.params.subscribe(O=>{this.projeto.id_empresa=O.id_empresa,this.projeto.id=O.id,this.idAcao=O.acao,this.setAcao(O.acao),this.load()})}ngOnInit(){this.idAcao==u.I.Inclusao?(this.projeto=new Z.w,this.projeto.id_empresa=1,this.setValue()):this.getProjeto()}ngOnDestroy(){var e,i,o,r,s;null===(e=this.inscricaoGet)||void 0===e||e.unsubscribe(),null===(i=this.inscricaoRota)||void 0===i||i.unsubscribe(),null===(o=this.inscricaoAcao)||void 0===o||o.unsubscribe(),null===(r=this.inscricaoGetDiretor)||void 0===r||r.unsubscribe(),null===(s=this.inscricaoGetClientes)||void 0===s||s.unsubscribe()}onSubmit(){console.log("this.formulario",this.formulario),this.formulario.valid?this.executaAcao():this.appSnackBar.openSuccessSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK")}onCancel(){this.router.navigate(["/projetos"])}getProjeto(){this.inscricaoGet=this.projetosService.getProjeto(this.projeto.id_empresa,this.projeto.id).subscribe(e=>{this.projeto=e,console.log("Retorno",this.projeto,e),this.setValue()},e=>{this.appSnackBar.openFailureSnackBar(`Pesquisa No Cadastro De Projetos ${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")})}setReadOnly(e){}setValue(){console.log("this.projeto-tela",this.projeto),this.formulario.setValue({id:this.projeto.id,descricao:this.projeto.descricao,id_diretor:this.projeto.id_diretor,diretor_razao:this.idAcao==u.I.Consulta||this.idAcao==u.I.Exclusao?this.projeto.diretor_razao:"",id_cliente:this.projeto.id_cliente,cliente_razao:this.idAcao==u.I.Consulta||this.idAcao==u.I.Exclusao?this.projeto.cliente_razao:"",dataprop:this.projeto.dataprop,dataproj:this.projeto.dataproj,dataenc:this.projeto.dataenc,horasve:this.projeto.horasve,horasplan:(0,m.Nm)(this.projeto.horasplan),horasexec:(0,m.Nm)(this.projeto.horasexec),horasdir:(0,m.Nm)(this.projeto.horasdir),status:this.projeto.status})}getLabelCancel(){return this.idAcao==u.I.Consulta?"Voltar":"Cancelar"}setAcao(e){switch(+e){case u.I.Inclusao:this.acao="Gravar",this.labelCadastro="Projetos - Inclus\xe3o.",this.readOnly=!1;break;case u.I.Edicao:this.acao="Gravar",this.labelCadastro="Projetos - Altera\xe7\xe3o.",this.readOnly=!1;break;case u.I.Consulta:this.acao="Voltar",this.labelCadastro="Projetos - Consulta.",this.readOnly=!0;break;case u.I.Exclusao:this.acao="Excluir",this.labelCadastro="Projetos - Exclus\xe3o.",this.readOnly=!0}}executaAcao(){var e=this;switch(this.projeto.descricao=this.formulario.value.descricao,this.projeto.id_diretor=this.formulario.value.id_diretor,this.projeto.id_cliente=this.formulario.value.id_cliente,this.projeto.dataprop=this.formulario.value.dataprop,this.projeto.dataproj=this.formulario.value.dataproj,this.projeto.dataenc=this.formulario.value.dataenc,this.projeto.horasve=this.formulario.value.horasve,this.projeto.user_insert=1,this.projeto.user_update=0,+this.idAcao){case u.I.Inclusao:this.projeto.user_insert=this.globalService.getUsuario().id,this.inscricaoAcao=this.projetosService.ProjetoInsert(this.projeto).subscribe(function(){var i=(0,q.Z)(function*(o){e.onCancel()});return function(o){return i.apply(this,arguments)}}(),i=>{this.appSnackBar.openFailureSnackBar(`Erro Na INclus\xe3o ${i.error.tabela} - ${i.error.erro} - ${i.error.message}`,"OK")});break;case u.I.Edicao:this.projeto.user_update=this.globalService.getUsuario().id,this.inscricaoAcao=this.projetosService.ProjetoUpdate(this.projeto).subscribe(function(){var i=(0,q.Z)(function*(o){e.onCancel()});return function(o){return i.apply(this,arguments)}}(),i=>{console.log("Error",i.error),this.appSnackBar.openFailureSnackBar(`Erro Na Altera\xe7\xe3o ${i.error.tabela} - ${i.error.erro} - ${i.error.message}`,"OK")});break;case u.I.Exclusao:this.inscricaoAcao=this.projetosService.ProjetoDelete(this.projeto.id_empresa,this.projeto.id).subscribe(function(){var i=(0,q.Z)(function*(o){e.onCancel()});return function(o){return i.apply(this,arguments)}}(),i=>{this.appSnackBar.openFailureSnackBar(`Erro Na Exclusao ${i.error.tabela} - ${i.error.erro} - ${i.error.message}`,"OK")})}}delay(e){return new Promise(i=>setTimeout(i,e))}getAcoes(){return u.I}touchedOrDirty(e){var i,o;return!(!(null===(i=this.formulario.get(e))||void 0===i?void 0:i.touched)&&!(null===(o=this.formulario.get(e))||void 0===o?void 0:o.dirty))}load(){let e=new F.w;e.id_empresa=1,e.grupo=this.usuariosService.getGruposDiretoria(),e.orderby="Grupo",this.inscricaoGetDiretor=this.usuariosService.getusuarios_01(e).subscribe(o=>{this.diretores=o},o=>{this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Usu\xe1rios ${o.error.tabela} - ${o.error.erro} - ${o.error.message}`,"OK")});let i=new B.j;i.id_empresa=1,i.orderby="Raz\xe3o",this.inscricaoGetClientes=this.clientesService.getClientes_01(i).subscribe(o=>{this.clientes=o},o=>{this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Clientes ${o.error.tabela} - ${o.error.erro} - ${o.error.message}`,"OK")})}openJustficativaPeriodoDialog(){const e=new V;e.titulo="ALTERA\xc7\xc3O DO PER\xcdDO",e.titulo_data1="Data Do Contrato",e.dataInicial=this.projeto.dataproj,e.titulo_data2="Data Do Encerramento",e.dataFinal=this.projeto.dataenc,e.justificativa="",e.dataHota=new Date,e.usuarioNome=this.globalService.getNomeusuarioLogado();const i=new _.vA;i.disableClose=!0,i.id="question",i.width="600px",i.data=e,this.justificaticaPeriodoDialog.open(K,i).beforeClosed().subscribe(r=>{console.log("Retorno data",r),void 0!==r&&r.processar&&(this.formulario.patchValue({dataproj:r.dataInicial}),this.formulario.patchValue({dataenc:r.dataFinal}),console.log("Fui....",this.formulario),this.onSubmit())})}onDataPeriodo(){this.openJustficativaPeriodoDialog()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(l.qu),t.Y36(N.T),t.Y36(M.J),t.Y36(z.Y),t.Y36(U.U),t.Y36(v.gz),t.Y36(v.F0),t.Y36(_.uw),t.Y36(j.W))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-projeto-view"]],decls:77,vars:25,consts:[[1,"div-barra"],[1,"example-spacer"],["mat-icon-button","","aria-label","Example icon-button with a menu","matTooltip","Manuten\xe7\xe3o Datas","matTooltipPosition","above",3,"matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],["mat-menu-item","",3,"click"],["autocomplete","off",3,"formGroup"],[1,"col-med-2"],["appearance","outline",1,"col-max"],["matInput","","formControlName","id"],["matInput","","formControlName","status",3,"readonly"],[1,"col-med-3"],["matInput","","formControlName","dataprop",3,"matDatepicker","readonly"],["matSuffix","",3,"for"],["propostaDatePicker",""],["matInput","","formControlName","dataproj",3,"matDatepicker","readonly"],["projetoDatePicker",""],["matInput","","formControlName","dataenc",3,"matDatepicker","readonly"],["encerramentoDatePicker",""],["field","","appearance","outline","class","col-max",4,"ngIf"],["matInput","","formControlName","horasve",3,"readonly"],["matInput","","formControlName","descricao",3,"readonly"],[4,"ngIf"],["matInput","","formControlName","horasplan",3,"readonly"],["matInput","","formControlName","horasexec",3,"readonly"],["matInput","","formControlName","horasdir",3,"readonly"],[1,"button-container-right"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"],["mat-icon-button","","aria-label","Example icon-button with a menu","matTooltip","Manuten\xe7\xe3o Datas","matTooltipPosition","above",3,"matMenuTriggerFor"],["field","","appearance","outline",1,"col-max"],["formControlName","id_diretor"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","formControlName","diretor_razao",3,"readonly"],["formControlName","id_cliente"],["matInput","","formControlName","cliente_razao",3,"readonly"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"span",1),t.TgZ(3,"mat-label"),t._uU(4),t.qZA(),t.qZA(),t.YNc(5,vt,3,1,"button",2),t.TgZ(6,"mat-menu",null,3),t.TgZ(8,"button",4),t.NdJ("click",function(){return i.onDataPeriodo()}),t.TgZ(9,"mat-icon"),t._uU(10,"calendar_view_day"),t.qZA(),t.TgZ(11,"span"),t._uU(12,"Per\xeddo Do Contrato"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"form",5),t.TgZ(14,"div",6),t.TgZ(15,"mat-form-field",7),t.TgZ(16,"mat-label"),t._uU(17,"C\xf3digo"),t.qZA(),t._UZ(18,"input",8),t.qZA(),t.TgZ(19,"mat-form-field",7),t.TgZ(20,"mat-label"),t._uU(21,"Situa\xe7\xe3o"),t.qZA(),t._UZ(22,"input",9),t.qZA(),t.qZA(),t.TgZ(23,"div",10),t.TgZ(24,"mat-form-field",7),t.TgZ(25,"mat-label"),t._uU(26,"Data Proposta"),t.qZA(),t._UZ(27,"input",11),t._UZ(28,"mat-datepicker-toggle",12),t._UZ(29,"mat-datepicker",null,13),t.qZA(),t.TgZ(31,"mat-form-field",7),t.TgZ(32,"mat-label"),t._uU(33,"Data Contrato"),t.qZA(),t._UZ(34,"input",14),t._UZ(35,"mat-datepicker-toggle",12),t._UZ(36,"mat-datepicker",null,15),t.qZA(),t.TgZ(38,"mat-form-field",7),t.TgZ(39,"mat-label"),t._uU(40,"Data Encerramento"),t.qZA(),t._UZ(41,"input",16),t._UZ(42,"mat-datepicker-toggle",12),t._UZ(43,"mat-datepicker",null,17),t.qZA(),t.qZA(),t.TgZ(45,"div",6),t.YNc(46,Zt,5,1,"mat-form-field",18),t.YNc(47,At,4,1,"mat-form-field",18),t.YNc(48,Tt,5,1,"mat-form-field",18),t.YNc(49,Ct,4,1,"mat-form-field",18),t.qZA(),t.TgZ(50,"div",6),t.TgZ(51,"mat-form-field",7),t.TgZ(52,"mat-label"),t._uU(53,"Horas Vendidas"),t.qZA(),t._UZ(54,"input",19),t.qZA(),t.TgZ(55,"mat-form-field",7),t.TgZ(56,"mat-label"),t._uU(57,"Descri\xe7\xe3o"),t.qZA(),t._UZ(58,"input",20),t.YNc(59,qt,2,0,"mat-error",21),t.qZA(),t.qZA(),t.TgZ(60,"div",10),t.TgZ(61,"mat-form-field",7),t.TgZ(62,"mat-label"),t._uU(63,"Horas Planejadas"),t.qZA(),t._UZ(64,"input",22),t.qZA(),t.TgZ(65,"mat-form-field",7),t.TgZ(66,"mat-label"),t._uU(67,"Horas Executadas"),t.qZA(),t._UZ(68,"input",23),t.qZA(),t.TgZ(69,"mat-form-field",7),t.TgZ(70,"mat-label"),t._uU(71,"Horas Diretoria"),t.qZA(),t._UZ(72,"input",24),t.qZA(),t.qZA(),t.TgZ(73,"div",25),t.YNc(74,St,2,1,"button",26),t.TgZ(75,"button",27),t.NdJ("click",function(){return i.onCancel()}),t._uU(76),t.qZA(),t.qZA(),t.qZA()),2&e){const o=t.MAs(30),r=t.MAs(37),s=t.MAs(44);let d;t.xp6(4),t.Oqu(i.labelCadastro),t.xp6(1),t.Q6J("ngIf",i.idAcao==i.getAcoes().Edicao),t.xp6(8),t.Q6J("formGroup",i.formulario),t.xp6(9),t.Q6J("readonly",i.readOnly),t.xp6(5),t.Q6J("matDatepicker",o)("readonly",i.readOnly),t.xp6(1),t.Q6J("for",o),t.xp6(6),t.Q6J("matDatepicker",r)("readonly",i.readOnly),t.xp6(1),t.Q6J("for",r),t.xp6(6),t.Q6J("matDatepicker",s)("readonly",i.readOnly),t.xp6(1),t.Q6J("for",s),t.xp6(4),t.Q6J("ngIf",i.idAcao!=i.getAcoes().Consulta&&i.idAcao!=i.getAcoes().Exclusao),t.xp6(1),t.Q6J("ngIf",i.idAcao==i.getAcoes().Consulta||i.idAcao==i.getAcoes().Exclusao),t.xp6(1),t.Q6J("ngIf",i.idAcao!=i.getAcoes().Consulta&&i.idAcao!=i.getAcoes().Exclusao),t.xp6(1),t.Q6J("ngIf",i.idAcao==i.getAcoes().Consulta||i.idAcao==i.getAcoes().Exclusao),t.xp6(5),t.Q6J("readonly",i.readOnly),t.xp6(4),t.Q6J("readonly",i.readOnly),t.xp6(1),t.Q6J("ngIf","INVALID"==(null==(d=i.formulario.get("descricao"))?null:d.status)&&i.touchedOrDirty("descricao")),t.xp6(5),t.Q6J("readonly",!0),t.xp6(4),t.Q6J("readonly",!0),t.xp6(4),t.Q6J("readonly",!0),t.xp6(2),t.Q6J("ngIf",3!=i.idAcao),t.xp6(2),t.Oqu(i.getLabelCancel())}},directives:[P.Ye,h.hX,p.O5,T.VK,T.OP,x.Hw,l._Y,l.JL,l.sg,h.KE,S.Nt,l.Fj,l.JJ,l.u,C.hl,C.nW,h.R9,C.Mq,A.lW,k.gM,T.p6,w.gD,p.sg,y.ey,h.TO],styles:[""]}),a})();function Pt(a,n){if(1&a&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.razao," ")}}function kt(a,n){if(1&a&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(e.getMensafield("justificativa"))}}function Ut(a,n){if(1&a&&(t.TgZ(0,"mat-form-field",13),t.TgZ(1,"mat-label"),t._uU(2,"Justificativa"),t.qZA(),t._UZ(3,"textarea",14),t.YNc(4,kt,2,1,"mat-error",15),t.qZA()),2&a){const e=t.oxw();let i;t.xp6(4),t.Q6J("ngIf","INVALID"==(null==(i=e.formulario.get("justificativa"))?null:i.status)&&e.touchedOrDirty("justificativa"))}}function Et(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().actionFunction()}),t.TgZ(1,"mat-icon"),t._uU(2,"check"),t.qZA(),t._uU(3," Gravar "),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("mat-dialog-close",e.data)}}let Ot=(()=>{class a{constructor(e,i,o){this.formBuilder=e,this.dialogRef=i,this.data=o,this.formulario=e.group({usuario:[{value:0}],justificativa:[{value:""},[(0,G.S)(5,200,o.temJustificativa)]]})}ngOnInit(){this.setValue()}setValue(){this.formulario.setValue({usuario:this.data.id_usuario,justificativa:this.data.justificativa})}actionFunction(){this.data.processar=!0,this.data.justificativa=this.formulario.value.justificativa,this.closeModal()}closeModal(){this.dialogRef.close()}onChangeUsuario(e){this.data.id_usuario=e.value}touchedOrDirty(e){var i,o;return!(!(null===(i=this.formulario.get(e))||void 0===i?void 0:i.touched)&&!(null===(o=this.formulario.get(e))||void 0===o?void 0:o.dirty))}getValidfield(e){var i,o;return(null===(o=null===(i=this.formulario.get(e))||void 0===i?void 0:i.errors)||void 0===o?void 0:o.ValidatorStringLen)&&this.touchedOrDirty(e)}getMensafield(e){var i,o;return null===(o=null===(i=this.formulario.get(e))||void 0===i?void 0:i.errors)||void 0===o?void 0:o.message}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(l.qu),t.Y36(_.so),t.Y36(_.WI))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-resp-exec-dialog"]],decls:23,vars:11,consts:[["autocomplete","off",3,"formGroup"],[1,"col-med-1"],["field","","appearance","outline",1,"col-max"],["formControlName","usuario",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["class","full-width","appearance","outline",4,"ngIf"],[1,"button-container-right"],["mat-raised-button","","color","accent","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","click",4,"ngIf"],[1,"button-container-left"],["color","accent"],["color","primary"],[3,"value"],["appearance","outline",1,"full-width"],["matInput","","formControlName","justificativa","oninput","this.value = this.value.toUpperCase()"],[4,"ngIf"],["mat-raised-button","","color","primary",3,"mat-dialog-close","click"]],template:function(e,i){1&e&&(t.TgZ(0,"h1"),t._uU(1),t.qZA(),t.TgZ(2,"form",0),t.TgZ(3,"div",1),t.TgZ(4,"mat-form-field",2),t.TgZ(5,"mat-label"),t._uU(6),t.qZA(),t.TgZ(7,"mat-select",3),t.NdJ("selectionChange",function(r){return i.onChangeUsuario(r)}),t.YNc(8,Pt,2,2,"mat-option",4),t.qZA(),t.qZA(),t.qZA(),t.YNc(9,Ut,5,1,"mat-form-field",5),t.TgZ(10,"div",6),t.TgZ(11,"button",7),t.NdJ("click",function(){return i.closeModal()}),t.TgZ(12,"mat-icon"),t._uU(13,"cancel"),t.qZA(),t._uU(14," Cancelar "),t.qZA(),t.YNc(15,Et,4,1,"button",8),t.qZA(),t.TgZ(16,"div",9),t.TgZ(17,"mat-label",10),t._uU(18),t.ALo(19,"date"),t.qZA(),t.qZA(),t.TgZ(20,"div",9),t.TgZ(21,"mat-label",11),t._uU(22),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(i.data.texto),t.xp6(1),t.Q6J("formGroup",i.formulario),t.xp6(4),t.Oqu(i.data.titulo),t.xp6(2),t.Q6J("ngForOf",i.data.usuarios),t.xp6(1),t.Q6J("ngIf",i.data.temJustificativa),t.xp6(6),t.Q6J("ngIf",i.formulario.valid),t.xp6(3),t.hij("Hora: ",t.xi3(19,8,i.data.dataHota,"dd-MM-yyyy HH:mm:ss"),""),t.xp6(4),t.hij("Respons\xe1vel:",i.data.usuarioNome,""))},directives:[l._Y,l.JL,l.sg,h.KE,h.hX,w.gD,l.JJ,l.u,p.sg,p.O5,A.lW,x.Hw,y.ey,S.Nt,l.Fj,h.TO,_.ZT],pipes:[p.uU],styles:["h1[_ngcontent-%COMP%]{text-align:left;font-family:Arial,Helvetica,sans-serif;font-size:x-large;color:#00f}.full-width[_ngcontent-%COMP%]{width:100%}"]}),a})();var wt=c(4705),yt=c(4560);class It{constructor(){this.executores=[],this.id_resp=-1,this.id_exec=-1,this.desconsiderar_resp=!0,this.desconsiderar_exec=!0,this.processar=!1}}class E{constructor(){this.id_empresa=0,this.id=0,this.id_projeto=0,this.conta="",this.versao="",this.subconta="",this.nivel=0,this.tipo="",this.controle="",this.id_resp=0,this.id_exec=0,this.id_subcliente=0,this.inicial=new Date,this.final=new Date,this.horasplan=0,this.horasexec=0,this.horasdir=0,this.obs="",this.user_insert=0,this.user_update=0,this.descricao_estru="",this.razao_cliente="",this.resp_nome=""}}var $=c(3962),W=c(7183),Y=c(7539);function Dt(a,n){if(1&a&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.razao," ")}}function Jt(a,n){if(1&a&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.razao," ")}}function Nt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().actionFunction()}),t.TgZ(1,"mat-icon"),t._uU(2,"check"),t.qZA(),t._uU(3," Confirmar "),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("mat-dialog-close",e.data)}}let Ft=(()=>{class a{constructor(e,i,o){this.formBuilder=e,this.dialogRef=i,this.data=o,this.formulario=e.group({desconsiderar_resp:[{value:""}],id_exec:[{value:""}],desconsiderar_exec:[{value:""}],id_resp:[{value:""}]})}ngOnInit(){this.setValue()}setValue(){this.formulario.setValue({desconsiderar_resp:this.data.desconsiderar_resp,id_resp:this.data.id_resp,desconsiderar_exec:this.data.desconsiderar_exec,id_exec:this.data.id_exec})}actionFunction(){this.data.processar=!0,this.data.id_resp=this.data.id_resp>-1?this.data.id_resp:0,this.data.id_exec=this.data.id_exec>-1?this.data.id_exec:0,this.closeModal()}closeModal(){this.dialogRef.close()}onChangeExecutor(e){this.data.id_exec=e.value,this.formulario.patchValue({desconsiderar_exec:!1})}onChangeResponsavel(e){this.data.id_resp=e.value,this.formulario.patchValue({desconsiderar_resp:!1})}onChangeResp(e){this.data.desconsiderar_resp=e.checked,this.formulario.patchValue({id_resp:-1}),this.data.id_resp=-1}onChangeExec(e){this.data.desconsiderar_exec=e.checked,this.formulario.patchValue({id_exec:-1}),this.data.id_exec=-1}itsOK(){let e=!1,i=!1;return e=!!(this.data.desconsiderar_resp||this.data.id_resp>-1),i=!!(this.data.desconsiderar_exec||this.data.id_exec>-1),e&&i}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(l.qu),t.Y36(_.so),t.Y36(_.WI))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-resp-audi-dialog"]],decls:28,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],[1,"col-med-1"],["formControlName","desconsiderar_resp",3,"change"],["field","","appearance","outline",1,"col-max"],["formControlName","id_resp",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","desconsiderar_exec",3,"change"],["formControlName","id_exec",3,"selectionChange"],[1,"button-container-right"],["mat-raised-button","","color","accent","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","click",4,"ngIf"],[3,"value"],["mat-raised-button","","color","primary",3,"mat-dialog-close","click"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Cadastro de Respons\xe1veis"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"form",2),t.TgZ(4,"div",3),t.TgZ(5,"mat-checkbox",4),t.NdJ("change",function(r){return i.onChangeResp(r)}),t._uU(6,"Desconsiderar"),t.qZA(),t.qZA(),t.TgZ(7,"div",3),t.TgZ(8,"mat-form-field",5),t.TgZ(9,"mat-label"),t._uU(10,"Respon\xe1vel"),t.qZA(),t.TgZ(11,"mat-select",6),t.NdJ("selectionChange",function(r){return i.onChangeResponsavel(r)}),t.YNc(12,Dt,2,2,"mat-option",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",3),t.TgZ(14,"mat-checkbox",8),t.NdJ("change",function(r){return i.onChangeExec(r)}),t._uU(15,"Desconsiderar"),t.qZA(),t.qZA(),t.TgZ(16,"div",3),t.TgZ(17,"mat-form-field",5),t.TgZ(18,"mat-label"),t._uU(19,"Executor"),t.qZA(),t.TgZ(20,"mat-select",9),t.NdJ("selectionChange",function(r){return i.onChangeExecutor(r)}),t.YNc(21,Jt,2,2,"mat-option",7),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",10),t.TgZ(23,"button",11),t.NdJ("click",function(){return i.closeModal()}),t.TgZ(24,"mat-icon"),t._uU(25,"cancel"),t.qZA(),t._uU(26," Cancelar "),t.qZA(),t.YNc(27,Nt,4,1,"button",12),t.qZA()),2&e&&(t.xp6(3),t.Q6J("formGroup",i.formulario),t.xp6(9),t.Q6J("ngForOf",i.data.executores),t.xp6(9),t.Q6J("ngForOf",i.data.executores),t.xp6(6),t.Q6J("ngIf",i.itsOK()))},directives:[_.uh,_.xY,l._Y,l.JL,l.sg,Y.oG,l.JJ,l.u,h.KE,h.hX,w.gD,p.sg,A.lW,x.Hw,p.O5,y.ey,_.ZT],styles:[""]}),a})();class Mt{constructor(){this.titulo="",this.texto="",this.usuarios=[],this.id_usuario=0,this.processar=!1,this.justificativa="",this.dataHota=new Date,this.usuarioNome="",this.temJustificativa=!0}}class I{constructor(){this.subconta="",this.nivel=0}}var Yt=c(4343),D=c(9715),Qt=c(1488),X=c(1790);let $t=(()=>{class a{transform(e){return"0"==e?"N\xe3o Iniciado":"1"==e?"Em Andamento":"2"==e?"Encerrado":"3"==e?"Suspenso":"4"==e?"Cancelado":""}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275pipe=t.Yjl({name:"situacaoAtividadeProjeto",type:a,pure:!0}),a})();function Rt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"section"),t.TgZ(1,"button",6),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA(),t.qZA(),t.TgZ(4,"mat-menu",null,7),t.TgZ(6,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().onHorasDiretoria()}),t.TgZ(7,"mat-icon"),t._uU(8,"assignment"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Horas Diretoria"),t.qZA(),t.qZA(),t.TgZ(11,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().onManutencaoLote()}),t.TgZ(12,"mat-icon"),t._uU(13,"assignment_ind"),t.qZA(),t.TgZ(14,"span"),t._uU(15,"Manuten\xe7\xe3o Em Lote"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&a){const e=t.MAs(5);t.xp6(1),t.Q6J("matMenuTriggerFor",e)}}function Ht(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"section"),t.TgZ(1,"button",9),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA(),t.qZA(),t.TgZ(4,"mat-menu",null,7),t.TgZ(6,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPeriodo()}),t.TgZ(7,"mat-icon"),t._uU(8,"assignment"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Per\xedodo"),t.qZA(),t.qZA(),t.TgZ(11,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().onResponsavel()}),t.TgZ(12,"mat-icon"),t._uU(13,"assignment_ind"),t.qZA(),t.TgZ(14,"span"),t._uU(15,"Respons\xe1vel"),t.qZA(),t.qZA(),t.TgZ(16,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().onExecutor()}),t.TgZ(17,"mat-icon"),t._uU(18,"assignment_ind"),t.qZA(),t.TgZ(19,"span"),t._uU(20,"Executor"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&a){const e=t.MAs(5);t.xp6(1),t.Q6J("matMenuTriggerFor",e)}}function Lt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().onRetorno()}),t.TgZ(1,"mat-icon"),t._uU(2,"arrow_back"),t.qZA(),t.qZA()}}function Bt(a,n){if(1&a&&(t.TgZ(0,"mat-option",34),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.razao," ")}}function Vt(a,n){if(1&a&&(t.TgZ(0,"mat-form-field",31),t.TgZ(1,"mat-label"),t._uU(2,"Responsavel"),t.qZA(),t.TgZ(3,"mat-select",32),t.YNc(4,Bt,2,2,"mat-option",33),t.qZA(),t.qZA()),2&a){const e=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",e.executores)}}function Gt(a,n){if(1&a&&(t.TgZ(0,"mat-option",34),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.razao," ")}}function Kt(a,n){if(1&a&&(t.TgZ(0,"mat-form-field",31),t.TgZ(1,"mat-label"),t._uU(2,"Executor"),t.qZA(),t.TgZ(3,"mat-select",35),t.YNc(4,Gt,2,2,"mat-option",33),t.qZA(),t.qZA()),2&a){const e=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",e.executores)}}function zt(a,n){if(1&a&&(t.TgZ(0,"mat-option",34),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.razao," ")}}function Wt(a,n){if(1&a&&(t.TgZ(0,"mat-form-field",31),t.TgZ(1,"mat-label"),t._uU(2,"SubCliente"),t.qZA(),t.TgZ(3,"mat-select",36),t.YNc(4,zt,2,2,"mat-option",33),t.qZA(),t.qZA()),2&a){const e=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",e.subclientes)}}function Xt(a,n){if(1&a&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&a){const e=t.oxw(2);let i;t.xp6(1),t.hij(" ",null==(i=e.formulario.get("obs"))||null==i.errors?null:i.errors.message,"")}}function te(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onSubmit()}),t._uU(1),t.qZA()}if(2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(e.acao)}}function ee(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"form",11),t.TgZ(1,"div",12),t.TgZ(2,"mat-form-field",13),t.TgZ(3,"mat-label"),t._uU(4,"Descricao Da Atividade:"),t.qZA(),t._UZ(5,"input",14),t.qZA(),t.qZA(),t.TgZ(6,"div",15),t.TgZ(7,"mat-form-field",13),t.TgZ(8,"mat-label"),t._uU(9,"Atividade"),t.qZA(),t._UZ(10,"input",16),t.qZA(),t.TgZ(11,"mat-form-field",13),t.TgZ(12,"mat-label"),t._uU(13,"Data Inicial"),t.qZA(),t._UZ(14,"input",17),t._UZ(15,"mat-datepicker-toggle",18),t._UZ(16,"mat-datepicker",null,19),t.qZA(),t.TgZ(18,"mat-form-field",13),t.TgZ(19,"mat-label"),t._uU(20,"Data Final"),t.qZA(),t._UZ(21,"input",20),t._UZ(22,"mat-datepicker-toggle",18),t._UZ(23,"mat-datepicker",null,21),t.qZA(),t.TgZ(25,"mat-form-field",13),t.TgZ(26,"mat-label"),t._uU(27,"Situa\xe7\xe3o"),t.qZA(),t._UZ(28,"input",22),t.qZA(),t.qZA(),t.TgZ(29,"div",23),t.YNc(30,Vt,5,1,"mat-form-field",24),t.YNc(31,Kt,5,1,"mat-form-field",24),t.YNc(32,Wt,5,1,"mat-form-field",24),t.qZA(),t.TgZ(33,"div",12),t.TgZ(34,"mat-form-field",25),t.TgZ(35,"mat-label"),t._uU(36,"Observa\xe7\xe3o"),t.qZA(),t._UZ(37,"input",26),t.YNc(38,Xt,2,1,"mat-error",2),t.qZA(),t.qZA(),t.TgZ(39,"div",27),t.TgZ(40,"div",28),t.YNc(41,te,2,1,"button",29),t.TgZ(42,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t._uU(43),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&a){const e=t.MAs(17),i=t.MAs(24),o=t.oxw();let r;t.Q6J("formGroup",o.formulario),t.xp6(5),t.Q6J("readonly",!0),t.xp6(5),t.Q6J("readonly",!0),t.xp6(4),t.Q6J("matDatepicker",e)("readonly",o.readOnly),t.xp6(1),t.Q6J("for",e),t.xp6(6),t.Q6J("matDatepicker",i)("readonly",o.readOnly),t.xp6(1),t.Q6J("for",i),t.xp6(6),t.Q6J("readonly",!0),t.xp6(2),t.Q6J("ngIf",o.idAcao!=o.getAcoes().Consulta&&o.idAcao!=o.getAcoes().Exclusao),t.xp6(1),t.Q6J("ngIf",o.idAcao!=o.getAcoes().Consulta&&o.idAcao!=o.getAcoes().Exclusao),t.xp6(1),t.Q6J("ngIf",o.idAcao!=o.getAcoes().Consulta&&o.idAcao!=o.getAcoes().Exclusao),t.xp6(5),t.Q6J("readonly",o.readOnly),t.xp6(1),t.Q6J("ngIf",(null==(r=o.formulario.get("obs"))||null==r.errors?null:r.errors.ValidatorStringLen)&&o.touchedOrDirty("obs")),t.xp6(3),t.Q6J("ngIf",3!=o.idAcao),t.xp6(2),t.Oqu(o.getLabelCancel())}}function ie(a,n){if(1&a&&(t.TgZ(0,"mat-option",34),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.Q6J("value",e.conta),t.xp6(1),t.AsE(" ",e.subconta,"-",e.descricao," ")}}function ae(a,n){if(1&a&&(t.TgZ(0,"mat-option",34),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.Q6J("value",e.conta),t.xp6(1),t.AsE(" ",e.subconta,"-",e.descricao," ")}}function oe(a,n){if(1&a&&(t.TgZ(0,"td",49),t._uU(1),t.ALo(2,"subconta"),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.subconta)," ")}}function ne(a,n){1&a&&(t.TgZ(0,"mat-label",58),t._uU(1,"Horas Diretoria.:"),t.qZA())}function re(a,n){if(1&a&&(t.TgZ(0,"mat-label",53),t._uU(1),t.ALo(2,"horaSexagenal"),t.qZA()),2&a){const e=t.oxw(3).$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.horasdir))}}function se(a,n){if(1&a&&(t.TgZ(0,"div",55),t.TgZ(1,"mat-label",58),t._uU(2,"Horas Pl.:"),t.qZA(),t.TgZ(3,"mat-label",53),t._uU(4),t.ALo(5,"horaSexagenal"),t.qZA(),t.TgZ(6,"mat-label",58),t._uU(7,"Horas Ex.:"),t.qZA(),t.TgZ(8,"mat-label",53),t._uU(9),t.ALo(10,"horaSexagenal"),t.qZA(),t.YNc(11,ne,2,0,"mat-label",56),t.YNc(12,re,3,3,"mat-label",57),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(4),t.Oqu(t.lcZ(5,4,e.horasplan)),t.xp6(5),t.Oqu(t.lcZ(10,6,e.horasexec)),t.xp6(2),t.Q6J("ngIf",1==e.nivel),t.xp6(1),t.Q6J("ngIf",1==e.nivel)}}function le(a,n){1&a&&(t.TgZ(0,"mat-label",58),t._uU(1,"Status:"),t.qZA())}function ce(a,n){if(1&a&&(t.TgZ(0,"mat-label",53),t._uU(1),t.ALo(2,"situacaoAtividadeProjeto"),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(1),t.hij("",t.lcZ(2,1,e.status)," ")}}function de(a,n){1&a&&(t.TgZ(0,"mat-label",58),t._uU(1,"Planejamento:"),t.qZA())}function ue(a,n){if(1&a&&(t.TgZ(0,"mat-label",53),t._uU(1),t.ALo(2,"situacaoAtividadeProjeto"),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(1),t.hij("",t.lcZ(2,1,e.status_pl)," ")}}function pe(a,n){1&a&&(t.TgZ(0,"mat-label",58),t._uU(1,"Execu\xe7\xe3o:"),t.qZA())}function _e(a,n){if(1&a&&(t.TgZ(0,"mat-label",53),t._uU(1),t.ALo(2,"situacaoAtividadeProjeto"),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(1),t.hij("",t.lcZ(2,1,e.status_ex)," ")}}function me(a,n){if(1&a&&(t.TgZ(0,"div",55),t.TgZ(1,"mat-label",58),t._uU(2,"Horas Pl.:"),t.qZA(),t.TgZ(3,"mat-label",53),t._uU(4),t.ALo(5,"horaSexagenal"),t.qZA(),t.TgZ(6,"mat-label",58),t._uU(7,"Horas Ex.:"),t.qZA(),t.TgZ(8,"mat-label",53),t._uU(9),t.ALo(10,"horaSexagenal"),t.qZA(),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(4),t.Oqu(t.lcZ(5,2,e.horasplan)),t.xp6(5),t.Oqu(t.lcZ(10,4,e.horasexec))}}function he(a,n){if(1&a&&(t.TgZ(0,"div",55),t.TgZ(1,"mat-label",58),t._uU(2,"Status:"),t.qZA(),t.TgZ(3,"mat-label",53),t._uU(4),t.ALo(5,"situacaoAtividadeProjeto"),t.qZA(),t.TgZ(6,"mat-label",58),t._uU(7,"Planejamento:"),t.qZA(),t.TgZ(8,"mat-label",53),t._uU(9),t.ALo(10,"situacaoAtividadeProjeto"),t.qZA(),t.TgZ(11,"mat-label",58),t._uU(12,"Execu\xe7\xe3o:"),t.qZA(),t.TgZ(13,"mat-label",53),t._uU(14),t.ALo(15,"situacaoAtividadeProjeto"),t.qZA(),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(4),t.Oqu(t.lcZ(5,3,e.status)),t.xp6(5),t.Oqu(t.lcZ(10,5,e.status_pl)),t.xp6(5),t.Oqu(t.lcZ(15,7,e.status_ex))}}function ge(a,n){if(1&a&&(t.TgZ(0,"div",55),t.TgZ(1,"mat-label",58),t._uU(2,"Respons\xe1vel:"),t.qZA(),t.TgZ(3,"mat-label",53),t._uU(4),t.qZA(),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(4),t.Oqu(e.resp_razao)}}function fe(a,n){if(1&a&&(t.TgZ(0,"div",55),t.TgZ(1,"mat-label",58),t._uU(2,"Data Inicial:"),t.qZA(),t.TgZ(3,"mat-label",53),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"mat-label",58),t._uU(7,"Data Final:"),t.qZA(),t.TgZ(8,"mat-label",53),t._uU(9),t.ALo(10,"date"),t.qZA(),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(4),t.Oqu(t.xi3(5,2,e.inicial,"dd/MM/yyyy")),t.xp6(5),t.Oqu(t.xi3(10,5,e.final,"dd/MM/yyyy"))}}function ve(a,n){if(1&a&&(t.TgZ(0,"div",55),t.TgZ(1,"mat-label",58),t._uU(2,"Executor:"),t.qZA(),t.TgZ(3,"mat-label",53),t._uU(4),t.qZA(),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(4),t.Oqu(e.exec_razao)}}function be(a,n){if(1&a&&(t.TgZ(0,"div",55),t.TgZ(1,"mat-label",58),t._uU(2,"Obs:"),t.qZA(),t.TgZ(3,"mat-label",53),t._uU(4),t.qZA(),t.qZA()),2&a){const e=t.oxw(2).$implicit;t.xp6(4),t.Oqu(e.obs)}}function Ze(a,n){if(1&a&&(t.TgZ(0,"td",50),t.TgZ(1,"div",51),t._UZ(2,"div",52),t.TgZ(3,"mat-label",53),t._uU(4),t.qZA(),t.qZA(),t.YNc(5,se,13,8,"div",54),t.TgZ(6,"div",55),t.YNc(7,le,2,0,"mat-label",56),t.YNc(8,ce,3,3,"mat-label",57),t.YNc(9,de,2,0,"mat-label",56),t.YNc(10,ue,3,3,"mat-label",57),t.YNc(11,pe,2,0,"mat-label",56),t.YNc(12,_e,3,3,"mat-label",57),t.qZA(),t.YNc(13,me,11,6,"div",54),t.YNc(14,he,16,9,"div",54),t.YNc(15,ge,5,1,"div",54),t.YNc(16,fe,11,8,"div",54),t.YNc(17,ve,5,1,"div",54),t.YNc(18,be,5,1,"div",54),t.qZA()),2&a){const e=t.oxw().$implicit,i=t.oxw(3);t.xp6(2),t.Q6J("ngStyle",i.setStyle(e,"P")),t.xp6(2),t.Oqu(e.estru_descri),t.xp6(1),t.Q6J("ngIf",1==e.nivel||"S"==e.tipo),t.xp6(2),t.Q6J("ngIf",1==e.nivel),t.xp6(1),t.Q6J("ngIf",1==e.nivel),t.xp6(1),t.Q6J("ngIf",1==e.nivel),t.xp6(1),t.Q6J("ngIf",1==e.nivel),t.xp6(1),t.Q6J("ngIf",1==e.nivel),t.xp6(1),t.Q6J("ngIf",1==e.nivel),t.xp6(1),t.Q6J("ngIf","O"==e.tipo),t.xp6(1),t.Q6J("ngIf","O"==e.tipo||"S"==e.tipo),t.xp6(1),t.Q6J("ngIf","O"==e.tipo),t.xp6(1),t.Q6J("ngIf","O"==e.tipo),t.xp6(1),t.Q6J("ngIf","O"==e.tipo),t.xp6(1),t.Q6J("ngIf","O"==e.tipo)}}function Ae(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",65),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit;return t.oxw(3).onSetFiltroSubConta(o.subconta,o.nivel)}),t.TgZ(1,"mat-icon"),t._uU(2,"filter_list"),t.qZA(),t.qZA()}}function xe(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",66),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit;return t.oxw(3).onDesanexar(o)}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA(),t.qZA()}}function Te(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",67),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,r=t.oxw(3);return r.escolha(o,r.getAcoes().Edicao)}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA(),t.qZA()}}function Ce(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",68),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit;return t.oxw(3).escolha(o,98)}),t.TgZ(1,"mat-icon"),t._uU(2,"assignment"),t.qZA(),t.qZA()}}function qe(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",69),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit;return t.oxw(3).onExcluir(o)}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA(),t.qZA()}}function Se(a,n){if(1&a&&(t.TgZ(0,"td",59),t.YNc(1,Ae,3,0,"button",60),t.YNc(2,xe,3,0,"button",61),t.YNc(3,Te,3,0,"button",62),t.YNc(4,Ce,3,0,"button",63),t.YNc(5,qe,3,0,"button",64),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","S"==e.tipo),t.xp6(1),t.Q6J("ngIf",1==e.nivel),t.xp6(1),t.Q6J("ngIf","O"==e.tipo),t.xp6(1),t.Q6J("ngIf","O"==e.tipo&&"S"==e.controle),t.xp6(1),t.Q6J("ngIf","O"==e.tipo||"S"==e.tipo)}}function je(a,n){if(1&a&&(t.TgZ(0,"tr"),t.YNc(1,oe,3,3,"td",46),t.YNc(2,Ze,19,15,"td",47),t.YNc(3,Se,6,5,"td",48),t.qZA()),2&a){const e=n.$implicit,i=t.oxw(3);t.xp6(1),t.Q6J("ngIf",i.getFiltro(e)),t.xp6(1),t.Q6J("ngIf",i.getFiltro(e)),t.xp6(1),t.Q6J("ngIf",i.getFiltro(e))}}function Pe(a,n){if(1&a&&(t.TgZ(0,"div"),t.TgZ(1,"table"),t.TgZ(2,"tr",44),t.TgZ(3,"th"),t._uU(4,"CONTA"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"CONTE\xdaDO"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"A\xc7\xc3O"),t.qZA(),t.qZA(),t.YNc(9,je,4,3,"tr",45),t.qZA(),t.qZA()),2&a){const e=t.oxw(2);t.xp6(9),t.Q6J("ngForOf",e.atividades)}}function ke(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",38),t.TgZ(1,"form",11),t.TgZ(2,"div",39),t.TgZ(3,"mat-form-field",31),t.TgZ(4,"mat-label"),t._uU(5,"Estruturas"),t.qZA(),t.TgZ(6,"mat-select",40),t.YNc(7,ie,2,3,"mat-option",33),t.qZA(),t.qZA(),t.TgZ(8,"div",41),t.TgZ(9,"button",37),t.NdJ("click",function(){return t.CHM(e),t.oxw().onAnexar()}),t._uU(10,"Anexar"),t.qZA(),t.qZA(),t.TgZ(11,"mat-form-field",42),t.TgZ(12,"mat-label"),t._uU(13,"Atividades"),t.qZA(),t.TgZ(14,"mat-select",43),t.NdJ("selectionChange",function(){return t.CHM(e),t.oxw().onVisualizar()}),t.YNc(15,ae,2,3,"mat-option",33),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(16,Pe,10,1,"div",2),t.qZA()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.parametros),t.xp6(6),t.Q6J("ngForOf",e.estruturasOff),t.xp6(8),t.Q6J("ngForOf",e.estruturasIn),t.xp6(1),t.Q6J("ngIf",e.atividades.length>0)}}let Ue=(()=>{class a{constructor(e,i,o,r,s,d,g,b,f,O,nt,Ui,Ei,Oi){this.questionDialog=e,this.respAudiDialog=i,this.jusPeriodoDialog=o,this.jusRespExecDialog=r,this.formBuilder=s,this.estruturasService=d,this.atividadesService=g,this.usuariosService=b,this.projetosService=f,this.clientesService=O,this.route=nt,this.router=Ui,this.appSnackBar=Ei,this.globalService=Oi,this.projeto=new Z.w,this.executores=[],this.subclientes=[],this.atividades=[],this.estruturasIn=[],this.estruturasOff=[],this.atividade=new E,this.erro="",this.id_empresa=0,this.id_projeto=0,this.durationInSeconds=3,this.acao="Sem Defini\xe7\xe3o",this.idAcao=u.I.Inclusao,this.readOnly=!0,this.readOnlyKey=!0,this.labelCadastro="",this.conta="",this.versao="",this.id_atividade_conta="",this.filtro=new I,this.id_exec=0,this.id_resp=0,this.formulario=s.group({descricao:[{value:""}],subconta:[{value:""}],inicial:[],final:[],id_resp:[{value:""},[l.kI.required,l.kI.min(1)]],status:[],id_exec:[{value:""},[l.kI.required,l.kI.min(1)]],id_subcliente:[{value:""},[l.kI.required,l.kI.min(1)]],obs:[{value:""}]}),this.parametros=s.group({conta:[{value:""}],atividade:[{value:""}]}),this.projeto=new Z.w,this.inscricaoRota=nt.params.subscribe(R=>{this.id_empresa=R.id_empresa,this.id_projeto=R.id_projeto,this.id_atividade_conta=R.id_atividade,this.idAcao=99,this.setAcao(99)}),this.getProjeto()}ngOnInit(){this.setParamentos(),this.getExecutores()}ngOnDestroy(){var e,i,o,r,s,d,g,b,f;null===(e=this.inscricaoAnexar)||void 0===e||e.unsubscribe(),null===(i=this.inscricaoGetFiltro)||void 0===i||i.unsubscribe(),null===(o=this.inscricaoAcao)||void 0===o||o.unsubscribe(),null===(r=this.inscricaoRota)||void 0===r||r.unsubscribe(),null===(s=this.inscricaoGetProjeto)||void 0===s||s.unsubscribe(),null===(d=this.inscricaoGetEstruturasIn)||void 0===d||d.unsubscribe(),null===(g=this.inscricaoGetEstruturasOff)||void 0===g||g.unsubscribe(),null===(b=this.inscricaoGetAtividade)||void 0===b||b.unsubscribe(),null===(f=this.inscricaoGetSubCliente)||void 0===f||f.unsubscribe()}openQuestionDialog(e,i){const o=new yt.Z;"all"==i&&(o.mensagem01="Deseja Excluir TODA ATIVIDADE ?"),"one"==i&&(o.mensagem01="Deseja Excluir A Atividade ?"),"partial"==i&&(o.mensagem01="Deseja Excluir A SubAtividade ?"),o.mensagem02=e.estru_descri;const r=new _.vA;r.disableClose=!0,r.id="question",r.width="600px",r.data=o,this.questionDialog.open(wt.h,r).beforeClosed().subscribe(d=>{console.log("data",d),"S"==d.resposta&&("all"==i&&this.Desanexar(e),"one"==i&&this.excluir(e.id_empresa,e.id_projeto,e.conta,e.versao,e.subconta),"partial"==i&&this.excluirPartial(e.id_empresa,e.id_projeto,e.conta,e.versao,e.subconta,e.nivel))})}openDialogRespAudi(){const e=new It;e.executores=this.executores;const i=new _.vA;i.disableClose=!0,i.id="modal-component",i.height="430px",i.width="600px",i.data=e,this.respAudiDialog.open(Ft,i).beforeClosed().subscribe(r=>{var s;console.log("data",r),this.id_resp=r.id_resp,this.id_exec=r.id_exec,r.processar&&(this.conta=null===(s=this.parametros.value.conta)||void 0===s?void 0:s.trim(),this.versao="0101",this.filtro=new I,this.router.navigate(["/projetos/anexarv2",this.conta,this.versao,this.id_projeto,this.id_resp,this.id_exec]))})}getProjeto(){this.globalService.setSpin(!0),this.inscricaoGetProjeto=this.projetosService.getProjeto(this.id_empresa,this.id_projeto).subscribe(e=>{this.globalService.setSpin(!1),this.projeto=e,this.id_atividade_conta="",this.getEstruturasIn()},e=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Pesquisa  Projeto ${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")})}getSubClientes(){console.log("Olha o projeto",this.projeto);let e=new B.j;e.id_empresa=this.id_empresa,e.grupo=this.projeto.cliente_gru_econo,e.orderby="Raz\xe3o",this.globalService.setSpin(!0),this.inscricaoGetSubCliente=this.clientesService.getClientes_01(e).subscribe(i=>{this.globalService.setSpin(!1),this.subclientes=i},i=>{this.globalService.setSpin(!1),this.atividades=[],this.appSnackBar.openFailureSnackBar(`${i.error.tabela} - ${i.error.erro} - ${i.error.message}`,"OK")})}getAtividade(e,i){this.globalService.setSpin(!0),this.inscricaoGetAtividade=this.atividadesService.getAtividade(e,i).subscribe(o=>{this.globalService.setSpin(!1),this.atividade=o,this.setValue()},o=>{this.globalService.setSpin(!1),this.atividade=new E,this.appSnackBar.openFailureSnackBar(`${o.error.tabela} - ${o.error.erro} - ${o.error.message}`,"OK")})}getAtividades(){let e=new $.l;e.id_empresa=this.id_empresa,e.conta=this.id_atividade_conta,e.versao=this.versao,e.id_projeto=this.id_projeto,e.orderby="projeto",this.globalService.setSpin(!0),this.inscricaoGetFiltro=this.atividadesService.getAtividades_01(e).subscribe(i=>{this.globalService.setSpin(!1),this.atividades=i,console.log("atividades",this.atividades)},i=>{this.globalService.setSpin(!1),this.atividades=[],this.appSnackBar.openFailureSnackBar(`${i.error.tabela} - ${i.error.erro} - ${i.error.message}`,"OK")})}getExecutores(){let e=new F.w;e.id_empresa=this.globalService.id_empresa;const i=this.usuariosService.getGruposDiretoria(),o=this.usuariosService.getGruposCoordenador(),r=this.usuariosService.getGruposAuditor();e.id_empresa=this.globalService.id_empresa,i.forEach(s=>{e.grupo.push(s)}),o.forEach(s=>{e.grupo.push(s)}),r.forEach(s=>{e.grupo.push(s)}),e.orderby="Raz\xe3o",this.globalService.setSpin(!0),this.inscricaoGetFiltro=this.usuariosService.getusuarios_01(e).subscribe(s=>{this.globalService.setSpin(!1),this.executores=s},s=>{this.globalService.setSpin(!1),this.executores=[],this.appSnackBar.openFailureSnackBar(`${s.error.tabela} - ${s.error.erro} - ${s.error.message}`,"OK")})}desanexarAtividades(e,i,o,r){this.globalService.setSpin(!1),this.inscricaoAnexar=this.atividadesService.desanexaatividade(e,i,o,r).subscribe(s=>{this.globalService.setSpin(!1),this.atividades=[],this.conta="",this.getProjeto(),this.appSnackBar.openSuccessSnackBar("Estrutura Exclu\xedda Com Sucesso!","OK")},s=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`${s.error.tabela} - ${s.error.erro} - ${s.error.message}`,"OK")})}excluir(e,i,o,r,s){this.globalService.setSpin(!0),this.inscricaoAnexar=this.atividadesService.atividadeDelete(e,i,o,r,s).subscribe(d=>{this.globalService.setSpin(!1),this.atividades=[],this.conta="",this.getProjeto(),this.appSnackBar.openSuccessSnackBar("Atividade Exclu\xedda Com Sucesso!","OK")},d=>{this.globalService.setSpin(!1),console.log(d),this.appSnackBar.openFailureSnackBar(`${d.error.tabela} - ${d.error.erro} - ${d.error.message}`,"OK")})}excluirPartial(e,i,o,r,s,d){this.globalService.setSpin(!0),this.inscricaoAnexar=this.atividadesService.desanexasubconta(e,i,o,r,s,d).subscribe(g=>{this.globalService.setSpin(!1),this.atividades=[],this.conta="",this.getProjeto(),this.appSnackBar.openSuccessSnackBar("SubAtividade Exclu\xedda Com Sucesso!","OK")},g=>{this.globalService.setSpin(!1),console.log(g),this.appSnackBar.openFailureSnackBar(`${g.error.tabela} - ${g.error.erro} - ${g.error.message}`,"OK")})}getEstruturasOff(){let e=new W.W;e.id_empresa=this.id_empresa,e.nivel=1,e.projeto_off="S",e.id_projeto=this.id_projeto,e.orderby="Conta",this.globalService.setSpin(!0),this.inscricaoGetEstruturasOff=this.estruturasService.getEstruturas(e).subscribe(i=>{this.globalService.setSpin(!1),this.estruturasOff=i},i=>{this.globalService.setSpin(!1),this.estruturasOff=[]})}getEstruturasIn(){let e=new W.W;e.id_empresa=this.id_empresa,e.nivel=1,e.projeto_in="S",e.id_projeto=this.id_projeto,e.orderby="Conta",this.globalService.setSpin(!0),this.inscricaoGetEstruturasIn=this.estruturasService.getEstruturas(e).subscribe(i=>{this.globalService.setSpin(!1),this.estruturasIn=i,""==this.id_atividade_conta&&this.estruturasIn.length>0&&(this.id_atividade_conta=this.estruturasIn[0].conta,this.setParametrosPath(),this.onVisualizar()),this.getSubClientes(),this.getEstruturasOff()},i=>{this.globalService.setSpin(!1),this.estruturasIn=[],this.getSubClientes(),this.getEstruturasOff(),console.log("erro in",i)})}escolha(e,i){98==i?0==e.id_exec||0==e.id_resp?this.appSnackBar.openSuccessSnackBar("Respons\xe1vel e Executor s\xe3o abrigatorios, para agendamento.","OK"):this.router.navigate(["/projetos/planejamentoagenda",e.id_empresa,e.id]):(this.idAcao=i,this.setAcao(this.idAcao),this.getAtividade(e.id_empresa,e.id))}setAcao(e){switch(+e){case u.I.Inclusao:this.acao="Gravar",this.labelCadastro="Atividade - Inclus\xe3o.",this.readOnly=!1;break;case u.I.Edicao:this.acao="Gravar",this.labelCadastro="Atividade - Altera\xe7\xe3o.",this.readOnly=!1;break;case u.I.Consulta:this.acao="Voltar",this.labelCadastro="Atividade - Consulta.",this.readOnly=!0;break;case u.I.Exclusao:this.acao="Excluir",this.labelCadastro="Atividade - Exclus\xe3o.",this.readOnly=!0;break;default:this.acao="",this.labelCadastro="",this.readOnly=!0}}executaAcao(){var e=this;switch(this.atividade.inicial=this.formulario.value.inicial,this.atividade.final=this.formulario.value.final,this.atividade.id_resp=this.formulario.value.id_resp,this.atividade.id_exec=this.formulario.value.id_exec,this.atividade.id_subcliente=this.formulario.value.id_subcliente,this.atividade.obs=this.formulario.value.obs,+this.idAcao){case u.I.Edicao:this.globalService.setSpin(!0),this.inscricaoAcao=this.atividadesService.atividadeUpdate(this.atividade).subscribe(function(){var i=(0,q.Z)(function*(o){e.globalService.setSpin(!1),e.onCancel(),e.refreshAtividade(e.atividade)});return function(o){return i.apply(this,arguments)}}(),i=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Erro Na Altera\xe7\xe3o ${i.error.tabela} - ${i.error.erro} - ${i.error.message}`,"OK")})}}onSubmit(){this.formulario.valid?this.executaAcao():this.appSnackBar.openFailureSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK")}onAnexar(){var e;""!=(null===(e=this.parametros.value.conta)||void 0===e?void 0:e.trim())?this.openDialogRespAudi():this.appSnackBar.openSuccessSnackBar("Informe Uma Estrutura Primeiro","OK")}onVisualizar(){var e,i;""!=(null===(e=this.parametros.value.atividade)||void 0===e?void 0:e.trim())?(this.id_atividade_conta=null===(i=this.parametros.value.atividade)||void 0===i?void 0:i.trim(),this.versao="0101",this.setParamentos(),this.filtro=new I,this.getAtividades()):this.appSnackBar.openSuccessSnackBar("Informe Uma Atividade Primeiro","OK")}setValue(){this.formulario.setValue({descricao:this.atividade.descricao_estru,subconta:this.atividade.subconta,inicial:this.atividade.inicial,final:this.atividade.final,id_resp:this.atividade.id_resp,id_exec:this.atividade.id_exec,id_subcliente:this.atividade.id_subcliente,obs:this.atividade.obs,status:""})}setParametrosPath(){this.parametros.patchValue({atividade:this.id_atividade_conta})}setParamentos(){this.parametros.setValue({conta:this.conta,atividade:this.id_atividade_conta})}getLabelCancel(){return this.idAcao==u.I.Consulta?"Voltar":"Cancelar"}onCancel(){this.idAcao=99,this.setAcao(99)}onRetorno(){this.router.navigate(["/projetos"])}onDesanexar(e){this.openQuestionDialog(e,"all")}Desanexar(e){this.desanexarAtividades(e.id_empresa,e.conta,e.versao,e.id_projeto)}onExcluir(e){this.openQuestionDialog(e,"S"==e.tipo?"partial":"one")}getAcoes(){return u.I}touchedOrDirty(e){var i,o;return!(!(null===(i=this.formulario.get(e))||void 0===i?void 0:i.touched)&&!(null===(o=this.formulario.get(e))||void 0===o?void 0:o.dirty))}getTexto(){return m.fd}getFiltro(e){return""==this.filtro.subconta||this.filtro.subconta.trim()==e.subconta.substring(0,2*this.filtro.nivel)}refreshAtividade(e){this.atividades.forEach(i=>{i.id==e.id&&(i.inicial=(0,m.JS)(this.formulario.value.inicial),i.final=(0,m.JS)(this.formulario.value.final),i.id_resp=this.formulario.value.id_resp,i.resp_razao=this.getRazao(this.formulario.value.id_resp),i.id_exec=this.formulario.value.id_exec,i.exec_razao=this.getRazao(this.formulario.value.id_exec),i.id_subcliente=this.formulario.value.id_subcliente,i.obs=this.formulario.value.obs)})}getRazao(e){let i="";return this.executores.forEach(o=>{o.id==e&&(i=o.razao)}),i}onSetFiltroSubConta(e,i){this.filtro.subconta==e?(this.filtro.subconta="",this.filtro.nivel=0):(this.filtro.subconta=e,this.filtro.nivel=i),console.log("Filtro Conta:",this.filtro.subconta,this.filtro.nivel)}onHorasDiretoria(){this.router.navigate(["/projetos/horasdiretoria",this.id_empresa,this.id_projeto])}onManutencaoLote(){console.log("this.id_atividade_conta)",this.id_atividade_conta),"NULL"==this.id_atividade_conta||""==this.id_atividade_conta.trim()?this.appSnackBar.openSuccessSnackBar("Selecione A Atividade Primeiro!","OK"):this.router.navigate(["/projetos/manuemlote",this.id_empresa,this.id_atividade_conta,this.id_projeto])}onPeriodo(){this.openJusPeriodoDialog()}onResponsavel(){this.openJusRespExecDialog("R")}onExecutor(){this.openJusRespExecDialog("E")}openJusPeriodoDialog(){const e=new V;e.titulo="ALTERA\xc7\xc3O DO PER\xcdODO",e.titulo_data1="Data Inicial",e.dataInicial=this.atividade.inicial,e.titulo_data2="Data Final",e.dataFinal=this.atividade.final,e.justificativa="",e.dataHota=new Date,e.usuarioNome=this.globalService.getNomeusuarioLogado();const i=new _.vA;i.disableClose=!0,i.id="jus-Periodo",i.width="600px",i.data=e,this.jusPeriodoDialog.open(K,i).beforeClosed().subscribe(r=>{console.log("Retorno data",r),void 0!==r&&r.processar&&(this.formulario.patchValue({inicial:r.dataInicial}),this.formulario.patchValue({final:r.dataFinal}),console.log("Fui....",this.formulario),this.onSubmit())})}openJusRespExecDialog(e){const i=new Mt;i.titulo="R"==e?"Respons\xe1vel":"Executor",i.texto="ALTERA\xc7\xc3O DO "+("R"==e?"RESPONS\xc1VEL":"EXECUTOR"),i.usuarios=this.executores,i.id_usuario="R"==e?this.atividade.id_resp:this.atividade.id_exec,i.justificativa="",i.dataHota=new Date,i.usuarioNome=this.globalService.getNomeusuarioLogado();const o=new _.vA;o.disableClose=!0,o.id="jus-Person",o.width="600px",o.data=i,this.jusRespExecDialog.open(Ot,o).beforeClosed().subscribe(s=>{console.log("Retorno data",s),void 0!==s&&s.processar&&((e="R")?this.formulario.patchValue({id_resp:s.id_usuario}):this.formulario.patchValue({id_exec:s.id_usuario}),console.log("Fui....",this.formulario),this.onSubmit())})}setStyle(e,i){let o={"background-color":"white"};return"P"==i?(1==e.nivelplan&&(o={"background-color":"green"}),2==e.nivelplan&&(o={"background-color":"yellow"}),3==e.nivelplan&&(o={"background-color":"red"}),4==e.nivelplan&&(o={"background-color":"black"})):(1==e.nivelexec&&(o={"background-color":"green"}),2==e.nivelexec&&(o={"background-color":"yellow"}),3==e.nivelexec&&(o={"background-color":"red"}),4==e.nivelexec&&(o={"background-color":"black"})),o}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(_.uw),t.Y36(_.uw),t.Y36(_.uw),t.Y36(_.uw),t.Y36(l.qu),t.Y36(Yt.K),t.Y36(D.a),t.Y36(M.J),t.Y36(N.T),t.Y36(z.Y),t.Y36(v.gz),t.Y36(v.F0),t.Y36(j.W),t.Y36(U.U))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-crud-atividade-projeto"]],decls:9,vars:7,consts:[[1,"div-barra"],[1,"example-spacer"],[4,"ngIf"],["mat-icon-button","","class","example-icon","aria-label","Example icon-button with share icon",3,"click",4,"ngIf"],["autocomplete","off",3,"formGroup",4,"ngIf"],["class","Atividade",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with a menu","matTooltip","Manuten\xe7\xe3o Auxliar","matTooltipPosition","above",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-icon-button","","aria-label","Example icon-button with a menu","matTooltip","Manuten\xe7\xe3o Auditada ATIVIDADE","matTooltipPosition","above",3,"matMenuTriggerFor"],["mat-icon-button","","aria-label","Example icon-button with share icon",1,"example-icon",3,"click"],["autocomplete","off",3,"formGroup"],[1,"col-med-1"],["appearance","outline",1,"MidleWidth"],["matInput","","formControlName","descricao",3,"readonly"],[1,"col-med-4"],["matInput","","formControlName","subconta",3,"readonly"],["matInput","","formControlName","inicial",3,"matDatepicker","readonly"],["matSuffix","",3,"for"],["inicialDatePicker",""],["matInput","","formControlName","final",3,"matDatepicker","readonly"],["finalDatePicker",""],["matInput","","formControlName","status",3,"readonly"],[1,"col-med-3"],["field","","appearance","outline","class","col-max",4,"ngIf"],["appearance","outline",1,"col-max"],["matInput","","formControlName","obs","oninput","this.value = this.value.toUpperCase()",3,"readonly"],[1,"cad-container"],[1,"button-container-right"],["class","buttons","mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",1,"buttons",3,"click"],["field","","appearance","outline",1,"col-max"],["formControlName","id_resp"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formControlName","id_exec"],["formControlName","id_subcliente"],["mat-raised-button","","color","primary",1,"buttons",3,"click"],[1,"Atividade"],[1,"col-med-5"],["formControlName","conta"],[1,"col-max"],["field","","appearance","outline",1,"col-max","column-span-2"],["formControlName","atividade",3,"selectionChange"],[1,"coluna-cabec"],[4,"ngFor","ngForOf"],["class","coluna-codigo",4,"ngIf"],["class","coluna-descricao",4,"ngIf"],["class","coluna-acao",4,"ngIf"],[1,"coluna-codigo"],[1,"coluna-descricao"],[1,"linha-status-projeto"],[1,"circulo",3,"ngStyle"],[1,"labelData"],["class","coluna-descricao cor-blue",4,"ngIf"],[1,"coluna-descricao","cor-blue"],["class","labelTitle",4,"ngIf"],["class","labelData",4,"ngIf"],[1,"labelTitle"],[1,"coluna-acao"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Fixar T\xf3pico","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Excluir Tudo","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Editar Atividade","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Agenda Da Atividade","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Excluir Atividade","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Fixar T\xf3pico","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Excluir Tudo","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Editar Atividade","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Agenda Da Atividade","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Excluir Atividade","matTooltipPosition","above",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"span",1),t._uU(3),t.qZA(),t.YNc(4,Rt,16,1,"section",2),t.YNc(5,Ht,21,1,"section",2),t.YNc(6,Lt,3,0,"button",3),t.qZA(),t.qZA(),t.YNc(7,ee,44,17,"form",4),t.YNc(8,ke,17,4,"div",5)),2&e&&(t.xp6(3),t.AsE("Contrato:",i.projeto.id," ",i.projeto.descricao," - Manuten\xe7\xe3o das Atividades"),t.xp6(1),t.Q6J("ngIf",99==i.idAcao),t.xp6(1),t.Q6J("ngIf",99!=i.idAcao),t.xp6(1),t.Q6J("ngIf",99==i.idAcao),t.xp6(1),t.Q6J("ngIf",99!=i.idAcao),t.xp6(1),t.Q6J("ngIf",99==i.idAcao))},directives:[P.Ye,p.O5,A.lW,k.gM,T.p6,x.Hw,T.VK,T.OP,l._Y,l.JL,l.sg,h.KE,h.hX,S.Nt,l.Fj,l.JJ,l.u,C.hl,C.nW,h.R9,C.Mq,w.gD,p.sg,y.ey,h.TO,p.PC],pipes:[Qt.M,X.X,$t,p.uU],styles:["Atividade[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;overflow-y:scroll;width:100%;height:500px}table[_ngcontent-%COMP%]{width:100%;cursor:pointer}.coluna-codigo[_ngcontent-%COMP%]{background-color:#878684;font-weight:bolder}.coluna-descricao[_ngcontent-%COMP%]{background-color:#a9ad9e}.coluna-acao[_ngcontent-%COMP%]{background-color:#e1e7d3;text-align:center;font-weight:400}.coluna-cabec[_ngcontent-%COMP%]{background-color:#e3bd11;text-align:center}.buttons[_ngcontent-%COMP%]{margin-top:12px;align-items:center}"]}),a})();var Ee=c(8440);class tt{constructor(){this.id_empresa=0,this.id=0,this.id_projeto=0,this.id_conta="",this.id_subconta="",this.id_resp=0,this.id_exec=0,this.inicial="",this.final="",this.horasapon=0,this.obs="",this.encerra="",this.user_insert=0,this.user_update=0,this.resp_razao="",this.exec_razao="",this.ativ_descricao=""}}class et{constructor(){this.id_empresa=0,this.id_projeto=0,this.id_conta="",this.id_subconta="",this.agenda=[]}}var Oe=c(98),we=c(1872),it=c(2559);let ye=(()=>{class a{transform(e){let i="N\xe3o";return i="S"==e?"Sim":"N\xe3o",i}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275pipe=t.Yjl({name:"simNao",type:a,pure:!0}),a})();function Ie(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().setFiltro()}),t.TgZ(1,"mat-icon"),t._uU(2,"filter_list"),t.qZA(),t.qZA()}}function De(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",15),t.TgZ(1,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onManha()}),t._uU(2,"Manh\xe3"),t.qZA(),t.TgZ(3,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onTarde()}),t._uU(4,"Tarde"),t.qZA(),t.qZA()}}function Je(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"form",6),t.TgZ(1,"h1"),t._uU(2),t.qZA(),t.YNc(3,De,5,0,"div",7),t.TgZ(4,"div",8),t.TgZ(5,"mat-form-field",9),t.TgZ(6,"mat-label"),t._uU(7,"Entrada"),t.qZA(),t._UZ(8,"input",10),t.qZA(),t.TgZ(9,"mat-form-field",9),t.TgZ(10,"mat-label"),t._uU(11,"Sa\xedda"),t.qZA(),t._UZ(12,"input",11),t.qZA(),t.TgZ(13,"mat-checkbox",12),t._uU(14,"Encerrar Atividade"),t.qZA(),t.qZA(),t.TgZ(15,"div",8),t.TgZ(16,"mat-form-field",13),t.TgZ(17,"mat-label"),t._uU(18,"Observa\xe7\xe3o"),t.qZA(),t._UZ(19,"input",14),t.qZA(),t.qZA(),t.TgZ(20,"div",15),t.TgZ(21,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSubmit()}),t._uU(22),t.qZA(),t.TgZ(23,"button",17),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCancel()}),t._uU(24),t.qZA(),t.qZA(),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("formGroup",e.formulario),t.xp6(2),t.hij("Lan\xe7amento:",e.labelCadastro,""),t.xp6(1),t.Q6J("ngIf",e.idAcao!=e.getAcoes().Consulta&&e.idAcao!=e.getAcoes().Exclusao),t.xp6(5),t.Q6J("dropSpecialCharacters",!1),t.xp6(4),t.Q6J("dropSpecialCharacters",!1),t.xp6(10),t.Oqu(e.acao),t.xp6(2),t.Oqu(e.getLabelCancel())}}function Ne(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,r=t.oxw().$implicit,s=t.oxw(2);return s.outras(s.getAcoes().Edicao,r,o)}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA(),t.qZA()}}function Fe(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,r=t.oxw().$implicit,s=t.oxw(2);return s.outras(s.getAcoes().Exclusao,r,o)}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA(),t.qZA()}}function Me(a,n){if(1&a&&(t.TgZ(0,"div"),t.TgZ(1,"mat-label",25),t._uU(2,"Encerrado:"),t.qZA(),t.TgZ(3,"mat-label",26),t._uU(4),t.ALo(5,"simNao"),t.qZA(),t.TgZ(6,"mat-label",25),t._uU(7,"Horario:"),t.qZA(),t.TgZ(8,"mat-label",26),t._uU(9),t.ALo(10,"date"),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"mat-label",25),t._uU(13,"Hora Apontadas:"),t.qZA(),t.TgZ(14,"mat-label",26),t._uU(15),t.ALo(16,"horaSexagenal"),t.qZA(),t.YNc(17,Ne,3,0,"button",27),t.YNc(18,Fe,3,0,"button",28),t.qZA()),2&a){const e=t.oxw().$implicit,i=t.oxw(3);t.xp6(4),t.hij("",t.lcZ(5,6,e.encerra)," "),t.xp6(5),t.AsE("",t.xi3(10,8,e.inicial,"HH:mm")," as ",t.xi3(11,11,e.final,"HH:mm")," "),t.xp6(6),t.Oqu(t.lcZ(16,14,e.horasapon)),t.xp6(2),t.Q6J("ngIf",e.id_projeto==i.atividade.id_projeto),t.xp6(1),t.Q6J("ngIf",e.id_projeto==i.atividade.id_projeto)}}function Ye(a,n){if(1&a&&(t.TgZ(0,"div"),t.TgZ(1,"mat-label",31),t._uU(2,"Contrato: "),t.qZA(),t.TgZ(3,"mat-label",26),t._uU(4),t.qZA(),t.qZA()),2&a){const e=t.oxw().$implicit,i=t.oxw(3);t.xp6(1),t.Q6J("matTooltip",i.showDadosProjeto(e)),t.xp6(3),t.AsE("",e.id_projeto,"-",e.proj_descricao,"")}}function Qe(a,n){if(1&a&&(t.TgZ(0,"div"),t.TgZ(1,"mat-label",25),t._uU(2,"Atividade:"),t.qZA(),t.TgZ(3,"mat-label",26),t._uU(4),t.qZA(),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(4),t.AsE("",e.id_subconta,"-",e.estru_descricao,"")}}function $e(a,n){if(1&a&&(t.TgZ(0,"div"),t.TgZ(1,"mat-label",25),t._uU(2,"Obs.:"),t.qZA(),t.TgZ(3,"mat-label",26),t._uU(4),t.qZA(),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.obs)}}function Re(a,n){if(1&a&&(t.TgZ(0,"div"),t.YNc(1,Me,19,16,"div",4),t.YNc(2,Ye,5,3,"div",4),t.YNc(3,Qe,5,2,"div",4),t.YNc(4,$e,5,1,"div",4),t.qZA()),2&a){const e=n.$implicit,i=t.oxw(3);t.xp6(1),t.Q6J("ngIf",i.exibir(e)),t.xp6(1),t.Q6J("ngIf",i.exibir(e)),t.xp6(1),t.Q6J("ngIf",i.exibir(e)),t.xp6(1),t.Q6J("ngIf",i.exibir(e))}}function He(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",20),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"td",21),t.YNc(5,Re,5,4,"div",19),t.qZA(),t.TgZ(6,"td",22),t.TgZ(7,"button",23),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return s.adicao(s.getAcoes().Inclusao,r)}),t.TgZ(8,"mat-icon"),t._uU(9,"add_circle_outline"),t.qZA(),t.qZA(),t.TgZ(10,"button",24),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).setFiltroData(r)}),t.TgZ(11,"mat-icon"),t._uU(12,"filter_list"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&a){const e=n.$implicit;t.xp6(2),t.hij("",t.xi3(3,2,e.data,"dd/MM/yyyy")," "),t.xp6(3),t.Q6J("ngForOf",e.movimentos)}}function Le(a,n){if(1&a&&(t.TgZ(0,"div"),t.TgZ(1,"table"),t.TgZ(2,"tr",18),t.TgZ(3,"th"),t._uU(4,"DATA"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"ATIVIDADES"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"A\xc7\xc3O"),t.qZA(),t.qZA(),t.YNc(9,He,13,5,"tr",19),t.qZA(),t.qZA()),2&a){const e=t.oxw();t.xp6(9),t.Q6J("ngForOf",e.parametroAgendaPlanejamento03.agenda)}}let Be=(()=>{class a{constructor(e,i,o,r,s,d,g,b){this.atividadesService=i,this.aponPlanejamentoService=o,this.route=r,this.globalService=s,this.router=d,this.appSnackBar=g,this.datePipe=b,this.durationInSeconds=2,this.parametroAgendaPlanejamento03=new et,this.agendamento=new Ee.Y,this.idAcao=0,this.acao="",this.labelCadastro="",this.id_empresa=0,this.id_atividade=0,this.atividade=new E,this.apontamento=new tt,this.dados_projetos="",this.intervalos=[],this.filtro=!1,this.filtroData=!1,this.dataFiltro="",this.formulario=e.group({entrada:[{value:""}],saida:[],encerra:[],obs:[{value:""}]}),this.setValue(),this.inscricaoRota=this.route.params.subscribe(f=>{this.id_empresa=f.id_empresa,this.id_atividade=f.id_atividade}),this.idAcao=99,this.setAcao(this.idAcao),this.setValue(),this.getAtividade()}ngOnInit(){}ngOnDestroy(){var e,i,o,r,s,d;null===(e=this.inscricaoGetAll)||void 0===e||e.unsubscribe(),null===(i=this.inscricaoAcao)||void 0===i||i.unsubscribe(),null===(o=this.inscricaoRota)||void 0===o||o.unsubscribe(),null===(r=this.inscricaoAtividade)||void 0===r||r.unsubscribe(),null===(s=this.inscricaoApontamento)||void 0===s||s.unsubscribe(),null===(d=this.inscricaoAponAgendas)||void 0===d||d.unsubscribe()}setAcao(e){switch(+e){case u.I.Inclusao:case u.I.Edicao:this.acao="Gravar";break;case u.I.Consulta:this.acao="Voltar";break;case u.I.Exclusao:this.acao="Excluir";break;default:this.acao="",this.labelCadastro=""}}adicao(e,i){this.apontamento=new tt,this.agendamento=i,this.intervalos=(0,m.qi)(i.movimentos,this.apontamento.id);const o=new Date((0,m.mu)(i.data_+" 00:00:00"));this.apontamento.id_empresa=this.id_empresa,this.apontamento.id_empresa=0,this.apontamento.id=0,this.apontamento.id_projeto=this.atividade.id_projeto,this.apontamento.id_conta=this.atividade.conta,this.apontamento.id_subconta=this.atividade.subconta,this.apontamento.id_resp=this.atividade.id_resp,this.apontamento.id_exec=this.atividade.id_exec,this.apontamento.inicial=(0,m.mu)((0,m.JS)(o)+" 00:00:00"),this.apontamento.final=(0,m.mu)((0,m.JS)(o)+" 00:00:00"),this.apontamento.horasapon=0,this.apontamento.obs="",this.apontamento.encerra="",this.apontamento.user_insert=1,this.apontamento.user_update=0,this.apontamento.resp_razao="",this.apontamento.exec_razao="",this.apontamento.ativ_descricao="",this.idAcao=e,this.setAcao(this.idAcao),this.labelCadastro=(this.datePipe.transform(i.data,"dd-MM-yyyy")||"").toString(),this.setValue()}outras(e,i,o){this.getApontamento(o.id_empresa,o.id,i),this.agendamento=i,this.labelCadastro=(this.datePipe.transform(this.agendamento.data,"dd-MM-yyyy")||"").toString(),this.idAcao=e,this.setAcao(this.idAcao)}executaAcao(){var e=this;let i=new Date(this.agendamento.data);switch(this.apontamento.id_empresa=this.id_empresa,this.apontamento.inicial=(0,m.B9)(i,(0,m.Lv)(this.formulario.value.entrada),(0,m.lj)(this.formulario.value.entrada)),this.apontamento.final=(0,m.B9)(i,(0,m.Lv)(this.formulario.value.saida),(0,m.lj)(this.formulario.value.saida)),this.apontamento.horasapon=(0,m.KB)((0,m.Hh)(this.apontamento.inicial,this.apontamento.final)),this.apontamento.encerra=this.formulario.value.encerra?"S":"N",this.apontamento.obs=this.formulario.value.obs,+this.idAcao){case u.I.Inclusao:this.apontamento.user_insert=this.globalService.getUsuario().id,this.inscricaoAcao=this.aponPlanejamentoService.ApoPlanejamentoInsert(this.apontamento).subscribe(function(){var o=(0,q.Z)(function*(r){e.getAponAgendas(),e.onCancel()});return function(r){return o.apply(this,arguments)}}(),o=>{this.appSnackBar.openFailureSnackBar(`${o.error.tabela} - ${o.error.erro} - ${o.error.message}`,"OK")});break;case u.I.Edicao:this.apontamento.user_update=this.globalService.getUsuario().id,this.inscricaoAcao=this.aponPlanejamentoService.ApoPlanejamentoUpdate(this.apontamento).subscribe(function(){var o=(0,q.Z)(function*(r){e.getAponAgendas(),yield e.appSnackBar.openSuccessSnackBar(r.message,"OK"),e.onCancel()});return function(r){return o.apply(this,arguments)}}(),o=>{console.log("Error",o.error),this.appSnackBar.openFailureSnackBar(`${o.error.tabela} - ${o.error.erro} - ${o.error.message}`,"OK")});break;case u.I.Exclusao:this.inscricaoAcao=this.aponPlanejamentoService.ApoPlanejamentoDelete(this.apontamento.id_empresa,this.apontamento.id).subscribe(function(){var o=(0,q.Z)(function*(r){e.getAponAgendas(),yield e.appSnackBar.openSuccessSnackBar(r.message,"OK"),e.onCancel()});return function(r){return o.apply(this,arguments)}}(),o=>{this.appSnackBar.openFailureSnackBar(`Erro Na Exclusao ${o.error.tabela} - ${o.error.erro} - ${o.error.message}`,"OK")})}}setValue(){this.formulario.setValue({entrada:this.apontamento.inicial.substring(this.apontamento.inicial.indexOf(" ")+1,16),saida:this.apontamento.final.substring(this.apontamento.final.indexOf(" ")+1,16),encerra:"S"==this.apontamento.encerra,obs:this.apontamento.obs})}getAtividade(){this.inscricaoAtividade=this.atividadesService.getAtividade(this.id_empresa,this.id_atividade).subscribe(e=>{console.log("atividade==>",e),this.atividade=e;let i=[];this.parametroAgendaPlanejamento03=new et,this.parametroAgendaPlanejamento03.id_empresa=this.atividade.id_empresa,this.parametroAgendaPlanejamento03.id_projeto=this.atividade.id,this.parametroAgendaPlanejamento03.id_conta=this.atividade.conta,this.parametroAgendaPlanejamento03.id_subconta=this.atividade.subconta,i=""!==this.dataFiltro?(0,m.Bb)(this.dataFiltro,this.dataFiltro,this.atividade.id_exec):(0,m.Bb)((0,m.JS)(this.atividade.inicial),(0,m.JS)(this.atividade.final),this.atividade.id_exec),console.log("Agendamentos..",i),this.parametroAgendaPlanejamento03.agenda=i,console.log("parametroAgendaPlanejamento03",this.parametroAgendaPlanejamento03),this.getAponAgendas()},e=>{this.atividade=new E,this.appSnackBar.openFailureSnackBar(`${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")})}getApontamento(e,i,o){this.inscricaoApontamento=this.aponPlanejamentoService.getApoPlanejamento(e,i).subscribe(r=>{this.apontamento=r,this.intervalos=(0,m.qi)(o.movimentos,i),this.setValue()},r=>{this.atividade=new E,this.appSnackBar.openFailureSnackBar(`${r.error.tabela} - ${r.error.erro} - ${r.error.message}`,"OK")})}getAponAgendas(){this.inscricaoAponAgendas=this.aponPlanejamentoService.getAponAgendaPlanejamentosV2(this.parametroAgendaPlanejamento03).subscribe(e=>{this.parametroAgendaPlanejamento03=e},e=>{this.atividade=new E,this.appSnackBar.openFailureSnackBar(`${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")})}onSubmit(){try{(this.idAcao==u.I.Inclusao||this.idAcao==u.I.Edicao)&&(0,m.yQ)(this.intervalos,this.formulario.value.entrada,this.formulario.value.saida),this.formulario.valid?this.executaAcao():this.appSnackBar.openSuccessSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK")}catch(e){e instanceof Oe.i?this.appSnackBar.openSuccessSnackBar(`Lan\xe7amento Conflitando: ${e.message}`,"OK"):console.log(e)}}onCancel(){this.idAcao=99,this.setAcao(99)}getLabelCancel(){return this.idAcao==u.I.Consulta?"Voltar":"Cancelar"}getAcoes(){return u.I}touchedOrDirty(e){var i,o;return!(!(null===(i=this.formulario.get(e))||void 0===i?void 0:i.touched)&&!(null===(o=this.formulario.get(e))||void 0===o?void 0:o.dirty))}getTexto(){return m.fd}onRetorno(){this.router.navigate(["projetos/anexaratividade",this.atividade.id_empresa,this.atividade.id_projeto,this.atividade.conta])}setFiltro(){this.filtro=!this.filtro}setFiltroData(e){console.log("Filtro Entrando",(0,m.JS)(e.data)),this.filtroData=!this.filtroData,this.filtroData?(console.log("Filtro Ativado",e),this.dataFiltro=e.data_,this.getAtividade()):(this.dataFiltro="",this.getAtividade())}exibir(e){let i=!0;return this.filtro&&e.id_projeto!==this.atividade.id_projeto&&(i=!1),i}showDadosProjeto(e){let i="";return i=`Projeto: ${e.id_projeto} Descri\xe7\xe3o: ${e.proj_descricao} Resp.: ${e.resp_razao}`,i}onManha(){this.apontamento.inicial=this.apontamento.inicial.substring(0,this.apontamento.final.indexOf(" ")+1)+"07:45",this.apontamento.final=this.apontamento.final.substring(0,this.apontamento.final.indexOf(" ")+1)+"12:00",this.formulario.patchValue({entrada:this.apontamento.inicial.substring(this.apontamento.inicial.indexOf(" ")+1,16),saida:this.apontamento.final.substring(this.apontamento.final.indexOf(" ")+1,16)})}onTarde(){this.apontamento.inicial=this.apontamento.inicial.substring(0,this.apontamento.inicial.indexOf(" ")+1)+"13:00",this.apontamento.final=this.apontamento.final.substring(0,this.apontamento.final.indexOf(" ")+1)+"17:45",this.formulario.patchValue({entrada:this.apontamento.inicial.substring(this.apontamento.inicial.indexOf(" ")+1,16),saida:this.apontamento.final.substring(this.apontamento.final.indexOf(" ")+1,16)})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(l.qu),t.Y36(D.a),t.Y36(we.G),t.Y36(v.gz),t.Y36(U.U),t.Y36(v.F0),t.Y36(j.W),t.Y36(p.uU))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-crud-planejamento-lancamento"]],decls:10,vars:5,consts:[[1,"example-spacer"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Filtro Contratos","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon",1,"example-icon",3,"click"],["autocomplete","off",3,"formGroup",4,"ngIf"],[4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Filtro Contratos","matTooltipPosition","above",3,"click"],["autocomplete","off",3,"formGroup"],["class","button-container-right",4,"ngIf"],[1,"cad-container"],["appearance","outline",1,"MidleWidth"],["matInput","","autofocus","","formControlName","entrada","mask","00:00","onfocus","this.select()",3,"dropSpecialCharacters"],["matInput","","formControlName","saida","mask","00:00","onfocus","this.select()",3,"dropSpecialCharacters"],["formControlName","encerra",1,"encerramento"],["appearance","outline",1,"LargerWidth"],["matInput","","formControlName","obs"],[1,"button-container-right"],["mat-raised-button","","color","primary",1,"buttons",3,"click"],["mat-raised-button","","color","accent",1,"buttons",3,"click"],[1,"coluna-cabec"],[4,"ngFor","ngForOf"],[1,"coluna-codigo"],[1,"coluna-descricao"],[1,"coluna-acao"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Novo Apontamento","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Filtrar Esta Data","matTooltipPosition","above",3,"click"],[1,"labelTitle"],[1,"labelData"],["mat-icon-button","","class","example-icon","aria-label","Example icon-button with share icon","matTooltip","Alterar Apontamento","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","class","example-icon","aria-label","Example icon-button with share icon","matTooltip","Excluir Apontamento","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Alterar Apontamento","matTooltipPosition","above",1,"example-icon",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Excluir Apontamento","matTooltipPosition","above",1,"example-icon",3,"click"],["matTooltipPosition","above",1,"labelTitle",3,"matTooltip"]],template:function(e,i){1&e&&(t.TgZ(0,"p"),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"span",0),t._uU(3),t.qZA(),t.YNc(4,Ie,3,0,"button",1),t.TgZ(5,"button",2),t.NdJ("click",function(){return i.onRetorno()}),t.TgZ(6,"mat-icon"),t._uU(7,"arrow_back"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(8,Je,25,7,"form",3),t.YNc(9,Le,10,1,"div",4)),2&e&&(t.xp6(3),t.AsE("Contrato: ",i.atividade.id_projeto," C\xf3digo Da Atividade: ",i.atividade.subconta,""),t.xp6(1),t.Q6J("ngIf",99==i.idAcao),t.xp6(4),t.Q6J("ngIf",99!==i.idAcao),t.xp6(1),t.Q6J("ngIf",99==i.idAcao))},directives:[P.Ye,p.O5,A.lW,x.Hw,k.gM,l._Y,l.JL,l.sg,h.KE,h.hX,S.Nt,l.Fj,it.hx,l.JJ,l.u,Y.oG,p.sg],pipes:[p.uU,ye,X.X],styles:[".cad-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}.button-container-right[_ngcontent-%COMP%]{display:flex;justify-content:right;height:min-content}.SmallWidth[_ngcontent-%COMP%]{width:40px}.MidleWidth[_ngcontent-%COMP%]{width:130px}.LargeWidth[_ngcontent-%COMP%]{width:350px}.LargerWidth[_ngcontent-%COMP%]{width:500px}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.buttons[_ngcontent-%COMP%]{margin-left:10px;align-items:center}.cabecalho[_ngcontent-%COMP%]{font:blue;font-size:15px;font-weight:300;justify-content:left}.Browse[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;overflow-y:scroll;width:100%;height:500px}table[_ngcontent-%COMP%]{width:100%;cursor:pointer}.Cabecalho[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px;height:30px;background-color:coral;text-align:center}.Detalhe[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px;height:30px;color:#000}.linha[_ngcontent-%COMP%]{background-color:#fff}.linha[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{background-color:#cc9}.labelTitleFirst[_ngcontent-%COMP%]{font-size:large;color:#00c}.labelTitle[_ngcontent-%COMP%]{font-size:large;color:#00c;margin-left:5px}.labelData[_ngcontent-%COMP%]{font-size:large;color:#000;margin-left:5px}.notIE[_ngcontent-%COMP%]{position:relative;display:inline-block}.select_tb[_ngcontent-%COMP%]{display:inline-block;height:30px;width:150px;padding:2px 10px 2px 2px;outline:none;color:#74646e;border:1px solid #C8BFC4;border-radius:4px;box-shadow:inset 1px 1px 2px #ddd8dc;background:#fff;margin-left:10px;margin-right:5px}.notIE[_ngcontent-%COMP%]   .fancyArrow[_ngcontent-%COMP%]{width:23px;height:28px;position:absolute;display:inline-block;top:1px;right:3px;background:url(https://stackoverflow.com/favicon.ico) right / 90% no-repeat #fff;pointer-events:none;margin-left:10px;margin-right:5px}@media screen and (min-width:0\\fffd){.notIE[_ngcontent-%COMP%]   .fancyArrow[_ngcontent-%COMP%]{display:none}}.input_tb[_ngcontent-%COMP%]{display:inline-block;height:30px;width:400px;padding:2px 10px 2px 2px;outline:none;color:#74646e;border:1px solid #C8BFC4;border-radius:4px;box-shadow:inset 1px 1px 2px #ddd8dc;background:#fff;margin-left:10px;margin-right:5px;text-transform:uppercase}.label_tb[_ngcontent-%COMP%]{margin-left:10px;margin-right:5px;vertical-align:middle;font-size:small}.button-right[_ngcontent-%COMP%]{display:flex;justify-content:right}.bordas[_ngcontent-%COMP%]{border:#0000CC solid 1px;padding-top:10px}.coluna-codigo[_ngcontent-%COMP%]{background-color:#878684;text-align:center;font-weight:bolder}.coluna-descricao[_ngcontent-%COMP%]{background-color:#a9ad9e}.coluna-acao[_ngcontent-%COMP%]{background-color:#e1e7d3;text-align:center;font-weight:400}.coluna-cabec[_ngcontent-%COMP%]{background-color:#e3bd11;font-size:large;text-align:center}.encerramento[_ngcontent-%COMP%]{margin-left:10px;padding-bottom:10px}"]}),a})();var at=c(3211),ot=c(3639);function Ve(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().onResponsavel()}),t.TgZ(1,"mat-icon"),t._uU(2,"person"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Respons\xe1vel"),t.qZA(),t.qZA(),t.TgZ(5,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().onExecutor()}),t.TgZ(6,"mat-icon"),t._uU(7,"person_outline"),t.qZA(),t.TgZ(8,"span"),t._uU(9,"Executor"),t.qZA(),t.qZA(),t.TgZ(10,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().onPeriodo()}),t.TgZ(11,"mat-icon"),t._uU(12,"date_range"),t.qZA(),t.TgZ(13,"span"),t._uU(14,"Per\xedodo"),t.qZA(),t.qZA()}}function Ge(a,n){if(1&a&&(t.TgZ(0,"div",17),t.TgZ(1,"mat-label",18),t._uU(2,"Horas Pl.:"),t.qZA(),t.TgZ(3,"mat-label",13),t._uU(4),t.qZA(),t.TgZ(5,"mat-label",18),t._uU(6,"Horas Ex.:"),t.qZA(),t.TgZ(7,"mat-label",13),t._uU(8),t.qZA(),t.TgZ(9,"mat-label",18),t._uU(10,"Horas Diretoria.:"),t.qZA(),t.TgZ(11,"mat-label",13),t._uU(12),t.qZA(),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.atividade.horasplan),t.xp6(4),t.Oqu(e.atividade.horasexec),t.xp6(4),t.Oqu(e.atividade.horasdir)}}function Ke(a,n){if(1&a&&(t.TgZ(0,"div",17),t.TgZ(1,"mat-label",18),t._uU(2,"Horas Pl.:"),t.qZA(),t.TgZ(3,"mat-label",13),t._uU(4),t.qZA(),t.TgZ(5,"mat-label",18),t._uU(6,"Horas Ex.:"),t.qZA(),t.TgZ(7,"mat-label",13),t._uU(8),t.qZA(),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.atividade.horasplan),t.xp6(4),t.Oqu(e.atividade.horasexec)}}function ze(a,n){if(1&a&&(t.TgZ(0,"div",17),t.TgZ(1,"mat-label",18),t._uU(2,"Respons\xe1vel:"),t.qZA(),t.TgZ(3,"mat-label",13),t._uU(4),t.qZA(),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.atividade.resp_razao)}}function We(a,n){if(1&a&&(t.TgZ(0,"div",17),t.TgZ(1,"mat-label",18),t._uU(2,"Data Inicial:"),t.qZA(),t.TgZ(3,"mat-label",13),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"mat-label",18),t._uU(7,"Data Final:"),t.qZA(),t.TgZ(8,"mat-label",13),t._uU(9),t.ALo(10,"date"),t.qZA(),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(t.xi3(5,2,e.atividade.inicial,"dd/MM/yyyy")),t.xp6(5),t.Oqu(t.xi3(10,5,e.atividade.final,"dd/MM/yyyy"))}}function Xe(a,n){if(1&a&&(t.TgZ(0,"div",17),t.TgZ(1,"mat-label",18),t._uU(2,"Executor:"),t.qZA(),t.TgZ(3,"mat-label",13),t._uU(4),t.qZA(),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.atividade.exec_razao)}}function ti(a,n){if(1&a&&(t.TgZ(0,"div",17),t.TgZ(1,"mat-label",18),t._uU(2,"Obs:"),t.qZA(),t.TgZ(3,"mat-label",13),t._uU(4),t.qZA(),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.atividade.obs)}}function ei(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).onFiltro(o.atividade.subconta,o.atividade.nivel)}),t.TgZ(1,"mat-icon"),t._uU(2,"filter_list"),t.qZA(),t.qZA()}}function ii(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",11),t.TgZ(2,"mat-checkbox",12),t.NdJ("change",function(o){const s=t.CHM(e).$implicit;return t.oxw(2).setAllItens(o.checked,s.atividade)}),t.qZA(),t.qZA(),t.TgZ(3,"td",11),t.TgZ(4,"mat-label",13),t._uU(5),t.qZA(),t.YNc(6,Ge,13,3,"div",14),t.YNc(7,Ke,9,2,"div",14),t.YNc(8,ze,5,1,"div",14),t.YNc(9,We,11,8,"div",14),t.YNc(10,Xe,5,1,"div",14),t.YNc(11,ti,5,1,"div",14),t.qZA(),t.TgZ(12,"td",15),t.YNc(13,ei,3,0,"button",16),t.qZA(),t.qZA()}if(2&a){const e=n.$implicit;t.xp6(2),t.Q6J("checked",e.checked),t.xp6(3),t.Oqu(e.atividade.estru_descri),t.xp6(1),t.Q6J("ngIf",1==e.atividade.nivel),t.xp6(1),t.Q6J("ngIf","O"==e.atividade.tipo),t.xp6(1),t.Q6J("ngIf","O"==e.atividade.tipo),t.xp6(1),t.Q6J("ngIf","O"==e.atividade.tipo),t.xp6(1),t.Q6J("ngIf","O"==e.atividade.tipo),t.xp6(1),t.Q6J("ngIf","O"==e.atividade.tipo),t.xp6(2),t.Q6J("ngIf","S"==e.atividade.tipo)}}function ai(a,n){if(1&a&&(t.TgZ(0,"div"),t.TgZ(1,"table"),t.TgZ(2,"tr",9),t.TgZ(3,"th"),t._uU(4,"CONTA"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"DESCRI\xc7\xc3O"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"FILTRO"),t.qZA(),t.qZA(),t.YNc(9,ii,14,9,"tr",10),t.qZA(),t.qZA()),2&a){const e=t.oxw();t.xp6(9),t.Q6J("ngForOf",e.displayAtividades)}}class oi{constructor(){this.checked=!1,this.atividade=new at.o}}let ni=(()=>{class a{constructor(e,i,o,r,s,d,g,b){this.respExecDialog=e,this.periodoDialog=i,this.globalService=o,this.atividadesService=r,this.usuariosService=s,this.route=d,this.router=g,this.appSnackBar=b,this.displayAtividades=[],this.projeto=new Z.w,this.id_empresa=0,this.conta="",this.id_projeto=0,this.atividades=[],this.durationInSeconds=2,this.filtro=new I,this.usuarios=[],this.inscricaoRota=d.params.subscribe(f=>{this.id_empresa=f.id_empresa,this.conta=f.conta,this.id_projeto=f.id_projeto})}ngOnInit(){this.getAtividades(),this.getUsuarios()}ngOnDestroy(){var e,i,o,r;null===(e=this.inscricaoGetFiltro)||void 0===e||e.unsubscribe(),null===(i=this.inscricaoRota)||void 0===i||i.unsubscribe(),null===(o=this.inscricaoSave)||void 0===o||o.unsubscribe(),null===(r=this.inscricaoUsuario)||void 0===r||r.unsubscribe()}getAtividades(){let e=new $.l;e.id_empresa=this.id_empresa,e.id_projeto=this.id_projeto,e.conta=this.conta,e.orderby="projeto",this.globalService.setSpin(!0),this.inscricaoGetFiltro=this.atividadesService.getAtividades_01(e).subscribe(i=>{this.globalService.setSpin(!1),this.atividades=i,this.loadDisplayItens()},i=>{this.globalService.setSpin(!1),this.atividades=[],"Nehuma Informa\xe7\xe3o Para Esta Consulta."==i.error.message?this.appSnackBar.openSuccessSnackBar("Nenhuma Atividade Encontrada Para Este Projeto!","OK"):this.appSnackBar.openFailureSnackBar(`${i.error.tabela} - ${i.error.erro} - ${i.error.message}`,"OK")})}getUsuarios(){let e=new F.w;e.id_empresa=this.id_empresa,e.orderby="Raz\xe3o",this.globalService.setSpin(!0),this.inscricaoUsuario=this.usuariosService.getusuarios_01(e).subscribe(i=>{this.globalService.setSpin(!1);const o=new ot.j;o.id=0,o.razao="N\xe3o Especificar.",this.usuarios=[],this.usuarios.push(o),i.forEach(r=>this.usuarios.push(r))},i=>{this.globalService.setSpin(!1),this.usuarios=[],this.appSnackBar.openFailureSnackBar(`${i.error.tabela} - ${i.error.erro} - ${i.error.message}`,"OK")})}onRetorno(){this.router.navigate(["/projetos"])}setAllItens(e,i){this.displayAtividades.forEach(o=>{console.log(i.subconta.substring(0,2*i.nivel),o.atividade.subconta.substring(0,2*i.nivel),i.subconta.substring(0,2*i.nivel)==o.atividade.subconta.substring(0,2*i.nivel),i.nivel,o.atividade.nivel),i.subconta.substring(0,2*i.nivel)==o.atividade.subconta.substring(0,2*i.nivel)&&o.atividade.nivel>=i.nivel&&(o.checked="O"==i.tipo?!o.checked:e)})}loadDisplayItens(){this.displayAtividades=[],this.atividades.forEach(e=>{if(this.getFiltro(e)){const i=new oi;i.checked=!1,i.atividade=e,this.displayAtividades.push(i)}})}onFiltro(e,i){this.SetFiltroSubConta(e,i),this.loadDisplayItens()}SetFiltroSubConta(e,i){this.filtro.subconta==e?(this.filtro.subconta="",this.filtro.nivel=0):(this.filtro.subconta=e,this.filtro.nivel=i),console.log("Filtro Conta:",this.filtro.subconta,this.filtro.nivel)}getFiltro(e){return""==this.filtro.subconta||this.filtro.subconta.trim()==e.subconta.substring(0,2*this.filtro.nivel)}onResponsavel(){this.openRespExecDialog("Respons\xe1vel","Defina O Respons\xe1vel")}onExecutor(){this.openRespExecDialog("Executor","Defina O Executor")}openRespExecDialog(e,i){}onPeriodo(){this.openPeriodoDialog()}openPeriodoDialog(){}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(_.uw),t.Y36(_.uw),t.Y36(U.U),t.Y36(D.a),t.Y36(M.J),t.Y36(v.gz),t.Y36(v.F0),t.Y36(j.W))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-manut-atividade-lote"]],decls:17,vars:7,consts:[[1,"div-barra"],[1,"example-spacer"],["mat-icon-button","","aria-label","Example icon-button with share icon ",3,"matMenuTriggerFor"],["appMenu","matMenu"],["matMenuContent",""],["mat-icon-button","","aria-label","Example icon-button with share icon",1,"example-icon",3,"click"],[1,"Atividade"],[4,"ngIf"],["mat-menu-item","",3,"click"],[1,"coluna-cabec"],[4,"ngFor","ngForOf"],[1,"coluna-descricao"],["color","accent",3,"checked","change"],[1,"labelData"],["class","coluna-descricao cor-blue",4,"ngIf"],[1,"coluna-acao"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Fixar T\xf3pico","matTooltipPosition","above",3,"click",4,"ngIf"],[1,"coluna-descricao","cor-blue"],[1,"labelTitle"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Fixar T\xf3pico","matTooltipPosition","above",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"span",1),t._uU(3),t.qZA(),t.TgZ(4,"button",2),t.TgZ(5,"mat-icon"),t._uU(6,"more_vert"),t.qZA(),t.qZA(),t.TgZ(7,"mat-menu",null,3),t.YNc(9,Ve,15,0,"ng-template",4),t.qZA(),t.TgZ(10,"button",5),t.NdJ("click",function(){return i.onRetorno()}),t.TgZ(11,"mat-icon"),t._uU(12,"arrow_back"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"p"),t._uU(14),t.qZA(),t.TgZ(15,"div",6),t.YNc(16,ai,10,1,"div",7),t.qZA()),2&e){const o=t.MAs(8);t.xp6(3),t.AsE("Contrato:",i.projeto.id," ",i.projeto.descricao," - Manuten\xe7\xe3o das Atividades "),t.xp6(1),t.Q6J("matMenuTriggerFor",o),t.xp6(10),t.lnq("",i.id_empresa,"-",i.conta,"-",i.id_projeto,""),t.xp6(2),t.Q6J("ngIf",i.displayAtividades.length>0)}},directives:[P.Ye,A.lW,T.p6,x.Hw,T.VK,T.KA,p.O5,T.OP,p.sg,Y.oG,h.hX,k.gM],pipes:[p.uU],styles:[""]}),a})();class ri{constructor(){this.id_empresa=0,this.id_atividade=0,this.horasdir=0,this.user_update=0}}class si{constructor(){this.horasdir=0,this.processar=!1}}function li(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().actionFunction()}),t.TgZ(1,"mat-icon"),t._uU(2,"check"),t.qZA(),t._uU(3," Gravar "),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("mat-dialog-close",e.data)}}let ci=(()=>{class a{constructor(e,i,o){this.formBuilder=e,this.dialogRef=i,this.data=o,this.formulario=e.group({horasdir:[{value:0}]})}ngOnInit(){this.setValue()}setValue(){this.formulario.setValue({horasdir:this.data.horasdir})}actionFunction(){this.data.horasdir=Number(this.formulario.value.horasdir),this.data.processar=!0,this.closeModal()}closeModal(){this.dialogRef.close()}itsOk(){return!isNaN(Number(this.formulario.value.horasdir))}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(l.qu),t.Y36(_.so),t.Y36(_.WI))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-horas-diretoria-dialog"]],decls:15,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],[1,"col-med-1"],["appearance","outline",1,"col-max"],["matInput","","formControlName","horasdir"],[1,"button-container-right"],["mat-raised-button","","color","accent","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"mat-dialog-close","click"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Informa A Horas Diretoria"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"form",2),t.TgZ(4,"div",3),t.TgZ(5,"mat-form-field",4),t.TgZ(6,"mat-label"),t._uU(7,"Horas Diretoria"),t.qZA(),t._UZ(8,"input",5),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"div",6),t.TgZ(10,"button",7),t.NdJ("click",function(){return i.closeModal()}),t.TgZ(11,"mat-icon"),t._uU(12,"cancel"),t.qZA(),t._uU(13," Cancelar "),t.qZA(),t.YNc(14,li,4,1,"button",8),t.qZA()),2&e&&(t.xp6(3),t.Q6J("formGroup",i.formulario),t.xp6(11),t.Q6J("ngIf",i.itsOk()))},directives:[_.uh,_.xY,l._Y,l.JL,l.sg,h.KE,h.hX,S.Nt,l.Fj,l.JJ,l.u,A.lW,x.Hw,p.O5,_.ZT],styles:["h1[_ngcontent-%COMP%]{text-align:left;font-family:Arial,Helvetica,sans-serif;font-size:x-large;color:#00f}"]}),a})();function di(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",13),t.TgZ(2,"mat-label",14),t._uU(3),t.qZA(),t.TgZ(4,"div",15),t.TgZ(5,"mat-label",16),t._uU(6,"Horas Pl.:"),t.qZA(),t.TgZ(7,"mat-label",14),t._uU(8),t.qZA(),t.TgZ(9,"mat-label",16),t._uU(10,"Horas Ex.:"),t.qZA(),t.TgZ(11,"mat-label",14),t._uU(12),t.qZA(),t.TgZ(13,"mat-label",16),t._uU(14,"Horas Diretoria.:"),t.qZA(),t.TgZ(15,"mat-label",14),t._uU(16),t.qZA(),t.qZA(),t.TgZ(17,"div",15),t.TgZ(18,"mat-label",16),t._uU(19,"Data Inicial:"),t.qZA(),t.TgZ(20,"mat-label",14),t._uU(21),t.ALo(22,"date"),t.qZA(),t.TgZ(23,"mat-label",16),t._uU(24,"Data Final:"),t.qZA(),t.TgZ(25,"mat-label",14),t._uU(26),t.ALo(27,"date"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"td",17),t.TgZ(29,"button",18),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).onHorasDiretoria(r)}),t.TgZ(30,"mat-icon"),t._uU(31,"edit"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&a){const e=n.$implicit;t.xp6(3),t.Oqu(e.estru_descri),t.xp6(5),t.Oqu(e.horasplan),t.xp6(4),t.Oqu(e.horasexec),t.xp6(4),t.Oqu(e.horasdir),t.xp6(5),t.Oqu(t.xi3(22,6,e.inicial,"dd/MM/yyyy")),t.xp6(5),t.Oqu(t.xi3(27,9,e.final,"dd/MM/yyyy"))}}function ui(a,n){if(1&a&&(t.TgZ(0,"div",10),t.TgZ(1,"table"),t.TgZ(2,"tr",11),t.TgZ(3,"th"),t._uU(4,"ATIVIDADES"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"AC\xc3O"),t.qZA(),t.qZA(),t.YNc(7,di,32,12,"tr",12),t.qZA(),t.qZA()),2&a){const e=t.oxw();t.xp6(7),t.Q6J("ngForOf",e.atividades)}}let pi=(()=>{class a{constructor(e,i,o,r,s,d,g,b){this.formBuilder=e,this.horasDiretoriaDialog=i,this.globalService=o,this.atividadesService=r,this.projetosService=s,this.route=d,this.router=g,this.appSnackBar=b,this.projeto=new Z.w,this.id_empresa=0,this.conta="",this.versao="",this.id_projeto=0,this.atividades=[],this.durationInSeconds=2,this.inscricaoRota=d.params.subscribe(f=>{this.id_empresa=f.id_empresa,this.id_projeto=f.id_projeto}),this.formulario=e.group({horasplan:[{value:""}],horasexec:[{value:""}],horasdir:[{value:""}]}),this.setValue()}ngOnInit(){this.getProjeto(),this.getAtividades()}ngOnDestroy(){var e,i,o,r;null===(e=this.inscricaoGetFiltro)||void 0===e||e.unsubscribe(),null===(i=this.inscricaoRota)||void 0===i||i.unsubscribe(),null===(o=this.inscricaoSave)||void 0===o||o.unsubscribe(),null===(r=this.incricaoProjeto)||void 0===r||r.unsubscribe()}getAtividades(){let e=new $.l;e.id_empresa=this.id_empresa,e.id_projeto=this.id_projeto,e.nivel=1,e.orderby="projeto",this.globalService.setSpin(!0),this.inscricaoGetFiltro=this.atividadesService.getAtividades_01(e).subscribe(i=>{this.globalService.setSpin(!1),this.atividades=i},i=>{this.globalService.setSpin(!1),this.atividades=[],"Nehuma Informa\xe7\xe3o Para Esta Consulta."==i.error.message?this.appSnackBar.openSuccessSnackBar("Nenhuma Atividade Encontrada Para Este Projeto!","OK"):this.appSnackBar.openFailureSnackBar(`${i.error.tabela} - ${i.error.erro} - ${i.error.message}`,"OK")})}getProjeto(){this.globalService.setSpin(!0),this.incricaoProjeto=this.projetosService.getProjeto(this.id_empresa,this.id_projeto).subscribe(e=>{this.globalService.setSpin(!1),this.projeto=e,this.setValue()},e=>{this.globalService.setSpin(!1),this.projeto=new Z.w,this.setValue(),"Nehuma Informa\xe7\xe3o Para Esta Consulta."==e.error.message?this.appSnackBar.openSuccessSnackBar("Nenhum Projeto! Encontrado","OK"):this.appSnackBar.openFailureSnackBar(`${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")})}saveHorasDir(e,i){const o=new ri;o.id_empresa=e.id_empresa,o.id_atividade=e.id,o.horasdir=i,o.user_update=this.globalService.getUsuario().id,this.globalService.setSpin(!0),this.inscricaoSave=this.atividadesService.atividadeUpdateHoraDir(o).subscribe(r=>{this.globalService.setSpin(!1),this.appSnackBar.openSuccessSnackBar("Horas Alteradas!","OK"),this.getProjeto(),this.getAtividades()},r=>{this.globalService.setSpin(!1),this.atividades=[],this.appSnackBar.openFailureSnackBar(`${r.error.tabela} - ${r.error.erro} - ${r.error.message}`,"OK")})}setValue(){this.formulario.setValue({horasplan:this.projeto.horasplan,horasexec:this.projeto.horasexec,horasdir:this.projeto.horasdir})}getLabelCabec(){return this.atividades.length>0?`Projeto:${this.atividades[0].id_projeto} ${this.atividades[0].proj_descri} - Horas Diretoria `:""}onHorasDiretoria(e){this.openHorasDiretoriaDialog(e)}openHorasDiretoriaDialog(e){const i=new si;i.horasdir=e.horasdir;const o=new _.vA;o.disableClose=!0,o.id="horasdir",o.width="600px",o.data=i,this.horasDiretoriaDialog.open(ci,o).beforeClosed().subscribe(s=>{console.log(s),s.processar?this.saveHorasDir(e,s.horasdir):alert("A\xe7\xe3o Ignorada")})}onRetorno(){this.router.navigate(["/projetos"])}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(l.qu),t.Y36(_.uw),t.Y36(U.U),t.Y36(D.a),t.Y36(N.T),t.Y36(v.gz),t.Y36(v.F0),t.Y36(j.W))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-horas-diretoria"]],decls:24,vars:6,consts:[[1,"div-barra"],[1,"example-spacer"],["mat-icon-button","","aria-label","Example icon-button with share icon",1,"example-icon",3,"click"],["autocomplete","off",3,"formGroup"],[1,"col-med-3"],["appearance","outline",1,"col-max"],["matInput","","formControlName","horasplan",3,"readonly"],["matInput","","formControlName","horasexec",3,"readonly"],["matInput","","formControlName","horasdir",3,"readonly"],["class","atividades",4,"ngIf"],[1,"atividades"],[1,"coluna-cabec"],[4,"ngFor","ngForOf"],[1,"coluna-descricao"],[1,"labelData"],[1,"coluna-descricao","cor-blue"],[1,"labelTitle"],[1,"coluna-acao"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Editar Atividade","matTooltipPosition","above",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"span",1),t._uU(3),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return i.onRetorno()}),t.TgZ(5,"mat-icon"),t._uU(6,"arrow_back"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"h3"),t._uU(8,"Resumo De Horas Do Projeto:"),t.qZA(),t.TgZ(9,"form",3),t.TgZ(10,"div",4),t.TgZ(11,"mat-form-field",5),t.TgZ(12,"mat-label"),t._uU(13,"Horas Planejadas"),t.qZA(),t._UZ(14,"input",6),t.qZA(),t.TgZ(15,"mat-form-field",5),t.TgZ(16,"mat-label"),t._uU(17,"Horas Executadas"),t.qZA(),t._UZ(18,"input",7),t.qZA(),t.TgZ(19,"mat-form-field",5),t.TgZ(20,"mat-label"),t._uU(21,"Horas Diretoria"),t.qZA(),t._UZ(22,"input",8),t.qZA(),t.qZA(),t.qZA(),t.YNc(23,ui,8,1,"div",9)),2&e&&(t.xp6(3),t.Oqu(i.getLabelCabec()),t.xp6(6),t.Q6J("formGroup",i.formulario),t.xp6(5),t.Q6J("readonly",!0),t.xp6(4),t.Q6J("readonly",!0),t.xp6(4),t.Q6J("readonly",!0),t.xp6(1),t.Q6J("ngIf",i.atividades.length>0))},directives:[P.Ye,A.lW,x.Hw,l._Y,l.JL,l.sg,h.KE,h.hX,S.Nt,l.Fj,l.JJ,l.u,p.O5,p.sg,k.gM],pipes:[p.uU],styles:[".atividade[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;overflow-y:scroll;width:100%;height:500px}table[_ngcontent-%COMP%]{width:100%;cursor:pointer}.coluna-codigo[_ngcontent-%COMP%]{background-color:#878684;font-weight:bolder}.coluna-descricao[_ngcontent-%COMP%]{background-color:#a9ad9e}.coluna-acao[_ngcontent-%COMP%]{background-color:#e1e7d3;text-align:center;font-weight:400}.coluna-cabec[_ngcontent-%COMP%]{background-color:#e3bd11;text-align:center}.buttons[_ngcontent-%COMP%]{margin-top:12px;align-items:center}"]}),a})();class _i{constructor(){this.checked=!1,this.show=!0,this.expandido=!0,this.atividade=new at.o}}class mi{constructor(){this.status=!1,this.last=0}}class hi{constructor(){this.id_empresa=0,this.conta="",this.versao="",this.id_projeto=0,this.id_resp=0,this.id_exec=0}}function gi(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"button",13),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.oxw(2).expandeContrair(o)}),t.TgZ(2,"mat-icon"),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"mat-checkbox",14),t.NdJ("change",function(o){t.CHM(e);const r=t.oxw().$implicit;return t.oxw(2).setAllItens(o.checked,r.atividade)}),t.qZA(),t.qZA()}if(2&a){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.expandido?"expand_less":"expand_more"),t.xp6(1),t.Q6J("checked",e.checked)}}function fi(a,n){1&a&&(t.TgZ(0,"div"),t._UZ(1,"mat-label",15),t.qZA())}function vi(a,n){if(1&a&&(t.TgZ(0,"div"),t.TgZ(1,"mat-label",15),t._uU(2),t.qZA(),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.atividade.estru_descri)}}function bi(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit;return t.oxw(2).expandeContrair(o)}),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA(),t.qZA()}if(2&a){const e=t.oxw(2).$implicit;t.xp6(2),t.Oqu(e.expandido?"expand_less":"expand_more")}}function Zi(a,n){1&a&&t._UZ(0,"div",20)}function Ai(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",16),t.YNc(1,bi,3,1,"button",17),t.TgZ(2,"mat-checkbox",18),t.NdJ("change",function(o){t.CHM(e);const r=t.oxw().$implicit;return t.oxw(2).setAllItens(o.checked,r.atividade)}),t.qZA(),t.TgZ(3,"mat-label",15),t._uU(4),t.qZA(),t.YNc(5,Zi,1,0,"div",19),t.qZA()}if(2&a){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngIf","O"!=e.atividade.tipo),t.xp6(1),t.Q6J("checked",e.checked)("ngStyle",i.setStyle(e.atividade)),t.xp6(2),t.hij(" ",e.atividade.estru_descri," "),t.xp6(1),t.Q6J("ngIf",1==e.atividade.nivel)}}function xi(a,n){if(1&a&&(t.TgZ(0,"tr"),t.TgZ(1,"td",11),t.YNc(2,gi,5,2,"div",7),t.YNc(3,fi,2,0,"div",7),t.qZA(),t.TgZ(4,"td",11),t.YNc(5,vi,3,1,"div",7),t.YNc(6,Ai,6,5,"div",12),t.qZA(),t.qZA()),2&a){const e=n.$implicit;t.xp6(2),t.Q6J("ngIf",1==e.atividade.nivel),t.xp6(1),t.Q6J("ngIf",e.atividade.nivel>1),t.xp6(2),t.Q6J("ngIf",1==e.atividade.nivel),t.xp6(1),t.Q6J("ngIf",e.atividade.nivel>1)}}function Ti(a,n){if(1&a&&(t.TgZ(0,"div"),t.TgZ(1,"table",8),t.TgZ(2,"tr",9),t.TgZ(3,"th"),t._uU(4,"CONTA"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"DESCRI\xc7\xc3O"),t.qZA(),t.qZA(),t.YNc(7,xi,7,4,"tr",10),t.qZA(),t.qZA()),2&a){const e=t.oxw();t.xp6(7),t.Q6J("ngForOf",e.getVisiblesAtividades())}}const Ci=[{path:"",redirectTo:"projetos",pathMatch:"full"},{path:"projetos",component:mt},{path:"projeto/:id_empresa/:id/:acao",component:jt},{path:"anexaratividade/:id_empresa/:id_projeto/:id_atividade",component:Ue},{path:"planejamentoagenda/:id_empresa/:id_atividade",component:Be},{path:"manuemlote/:id_empresa/:conta/:id_projeto",component:ni},{path:"anexarv2/:conta/:conta_versao/:id_projeto/:id_resp/:id_exec",component:(()=>{class a{constructor(e,i,o,r,s,d){this.globalService=e,this.atividadesService=i,this.usuariosService=o,this.route=r,this.router=s,this.appSnackBar=d,this.displayAtividades=[],this.projeto=new Z.w,this.conta="",this.conta_versao="",this.id_projeto=0,this.id_resp=0,this.id_exec=0,this.atividades=[],this.durationInSeconds=2,this.filtro=new I,this.usuarios=[],this.inscricaoRota=r.params.subscribe(g=>{this.conta=g.conta,this.conta_versao=g.conta_versao,this.id_projeto=g.id_projeto,this.id_resp=g.id_resp,this.id_exec=g.id_exec})}ngOnInit(){this.getAtividades(),this.getUsuarios()}ngOnDestroy(){var e,i,o,r;null===(e=this.inscricaoGetFiltro)||void 0===e||e.unsubscribe(),null===(i=this.inscricaoRota)||void 0===i||i.unsubscribe(),null===(o=this.inscricaoSave)||void 0===o||o.unsubscribe(),null===(r=this.inscricaoUsuario)||void 0===r||r.unsubscribe()}getAtividades(){let e=new hi;e.id_empresa=this.globalService.id_empresa,e.id_projeto=this.id_projeto,e.conta=this.conta,e.versao=this.conta_versao,e.id_resp=this.id_resp,e.id_exec=this.id_exec,this.globalService.setSpin(!0),this.inscricaoGetFiltro=this.atividadesService.getAtividades_02(e).subscribe(i=>{this.globalService.setSpin(!1),this.loadDisplayItens(i),this.displayAtividades[0].expandido=!0,this.expandeContrair(this.displayAtividades[0])},i=>{this.globalService.setSpin(!1),this.atividades=[],"Nehuma Informa\xe7\xe3o Para Esta Consulta."==i.error.message?this.appSnackBar.openSuccessSnackBar("Nenhuma Atividade Encontrada Para Este Projeto!","OK"):(console.log(i),this.appSnackBar.openFailureSnackBar(`${i}`,"OK"))})}getUsuarios(){let e=new F.w;e.id_empresa=this.globalService.id_empresa,e.orderby="Raz\xe3o",this.globalService.setSpin(!0),this.inscricaoUsuario=this.usuariosService.getusuarios_01(e).subscribe(i=>{this.globalService.setSpin(!1);const o=new ot.j;o.id=0,o.razao="N\xe3o Especificar.",this.usuarios=[],this.usuarios.push(o),i.forEach(r=>this.usuarios.push(r))},i=>{this.globalService.setSpin(!1),this.usuarios=[],this.appSnackBar.openFailureSnackBar(`${i.error.tabela} - ${i.error.erro} - ${i.error.message}`,"OK")})}onRetorno(){this.router.navigate(["projetos/anexaratividade",this.globalService.getIdEmpresa(),this.id_projeto,"NULL"])}setAllItens(e,i){this.displayAtividades.forEach(o=>{i.subconta.substring(0,2*i.nivel)==o.atividade.subconta.substring(0,2*i.nivel)&&o.atividade.nivel>=i.nivel&&(o.checked="O"==i.tipo?!o.checked:e)}),this.displayAtividades[0].checked=this.setStatusRecursivo(1,this.displayAtividades[0].atividade.conta).status}setStyle(e){let i={"margin-left":"5px"};switch(e.nivel){case 1:i={"margin-left":"5px"};break;case 2:i={"margin-left":"0px"};break;case 3:i={"margin-left":"62px"};break;default:i={"margin-left":"5px"}}return i}loadDisplayItens(e){this.displayAtividades=[],e.forEach(i=>{const o=new _i;o.checked=!0,o.show=!0,o.expandido=!1,o.atividade=i,this.displayAtividades.push(o)})}getVisiblesAtividades(){return this.displayAtividades.filter(e=>1==e.atividade.nivel||e.show)}expandeContrair(e){e.expandido=!e.expandido,this.displayAtividades.forEach(i=>{(1==e.atividade.nivel&&i.atividade.subconta.substring(0,2)==e.atividade.subconta.substring(0,2)||i.atividade.conta==e.atividade.conta&&i.atividade.subconta.trim()==e.atividade.subconta.trim())&&(i.expandido=e.expandido,this.setSubConta(i.atividade.subconta.trim(),i.expandido,i.atividade.nivel))})}setSubConta(e,i,o){this.displayAtividades.forEach(r=>{r.atividade.nivel>o&&r.atividade.subconta.trim().substring(0,2*o)==e&&("O"==r.atividade.tipo&&(r.show=i),r.expandido=i)})}setStatusRecursivo(e,i){let o=new mi;for(let s=e;s<this.displayAtividades.length;s++)if("C"!=this.displayAtividades[s].atividade.tipo&&"S"!=this.displayAtividades[s].atividade.tipo){if(o.last=s,this.displayAtividades[s].checked&&(o.status=!0),s<this.displayAtividades.length-1&&"O"!=this.displayAtividades[s+1].atividade.tipo)return o}else{let d=this.setStatusRecursivo(s+1,this.displayAtividades[s].atividade.subconta);this.displayAtividades[s].checked=d.status,s=d.last,d.status&&(o.status=!0)}return o}onSave(){this.displayAtividades.forEach(e=>{e.atividade.id_resp=this.id_resp,e.atividade.id_exec=this.id_exec}),this.globalService.setSpin(!0),this.inscricaoSave=this.atividadesService.anexaatividadev2(this.displayAtividades).subscribe(e=>{this.globalService.setSpin(!1),this.appSnackBar.openSuccessSnackBar(e.message,"OK"),this.onRetorno()},e=>{this.globalService.setSpin(!1),this.atividades=[],"Nehuma Informa\xe7\xe3o Para Esta Consulta."==e.error.message?this.appSnackBar.openSuccessSnackBar("Nenhuma Atividade Encontrada Para Este Projeto!","OK"):this.appSnackBar.openFailureSnackBar(`${e}`,"OK")})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(U.U),t.Y36(D.a),t.Y36(M.J),t.Y36(v.gz),t.Y36(v.F0),t.Y36(j.W))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-anexar-v2"]],decls:14,vars:3,consts:[[1,"div-barra"],[1,"example-spacer"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Gravar Nova Vers\xe3o","matTooltipPosition","above",1,"example-icon",3,"click"],[1,"green-icon"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Cancelar","matTooltipPosition","above",1,"example-icon",3,"click"],[1,"red-icon"],["mat-icon-button","","aria-label","Example icon-button with share icon",1,"example-icon",3,"click"],[4,"ngIf"],[1,"Browse_Lanc"],[1,"coluna-cabec"],[4,"ngFor","ngForOf"],[1,"coluna-descricao"],["class","linha-status-projeto",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon ",3,"click"],["color","accent",3,"checked","change"],[1,"labelData"],[1,"linha-status-projeto"],["mat-icon-button","","aria-label","Example icon-button with share icon ",3,"click",4,"ngIf"],["color","accent",3,"checked","ngStyle","change"],["class","coluna-descricao cor-blue",4,"ngIf"],[1,"coluna-descricao","cor-blue"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"span",1),t._uU(3),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return i.onSave()}),t.TgZ(5,"mat-icon",3),t._uU(6,"check"),t.qZA(),t.qZA(),t.TgZ(7,"button",4),t.NdJ("click",function(){return i.onRetorno()}),t.TgZ(8,"mat-icon",5),t._uU(9,"cancel"),t.qZA(),t.qZA(),t.TgZ(10,"button",6),t.NdJ("click",function(){return i.onRetorno()}),t.TgZ(11,"mat-icon"),t._uU(12,"arrow_back"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(13,Ti,8,1,"div",7)),2&e&&(t.xp6(3),t.AsE("Contrato:",i.projeto.id," ",i.projeto.descricao," - Manuten\xe7\xe3o das Atividades "),t.xp6(10),t.Q6J("ngIf",i.displayAtividades.length>0))},directives:[P.Ye,A.lW,k.gM,x.Hw,p.O5,p.sg,Y.oG,h.hX,p.PC],styles:[""]}),a})()},{path:"horasdiretoria/:id_empresa/:id_projeto",component:pi}];let qi=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[v.Bz.forChild(Ci)],v.Bz]}),a})();var Si=c(3122),ji=c(4466),Pi=c(9243);let ki=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[Pi.Cl,p.ez,qi,Si.q,l.u5,l.UX,ji.m,it.yI.forChild()]]}),a})()}}]);