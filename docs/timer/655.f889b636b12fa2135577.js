"use strict";(self.webpackChunktimer=self.webpackChunktimer||[]).push([[655],{3639:(A,m,i)=>{i.d(m,{j:()=>u});class u{constructor(){this.id_empresa=0,this.id=0,this.razao="",this.grupo="",this.email=""}}},5655:(A,m,i)=>{i.r(m),i.d(m,{ExecucaoModule:()=>gt});var u=i(8583),h=i(4655),p=i(8239),l=i(3679);class d{constructor(){this.id_empresa=0,this.id=0,this.id_projeto=0,this.id_conta="",this.id_subconta="",this.id_resp=0,this.id_exec=0,this.id_motivo="",this.inicial="",this.final="",this.obs="",this.horasapon=0,this.encerramento="N",this.user_insert=0,this.user_update=0,this.estru_descricao="",this.resp_razao="",this.exec_razao="",this.proj_descricao="",this.motivo_descricao="",this.motivo_produtivo="",this.ativ_inicial="",this.ativ_final="",this.cli_razao=""}}var _=i(8440),n=i(3032),r=i(7117),I=i(3962),L=i(98),N=i(3211),E=i(7438),$=i(4878),y=i(9648),D=i(3914);class J{constructor(c,a,o){this.idEmpresa=c,this.idAuditor=a,this.id_atividade=0,this.id_empresa=c,this.id_auditor=a,this.hoje=o}getId_Atividade(){return this.id_atividade}setId_Atividade(c){this.id_atividade=c}}var t=i(7716),M=i(1209),k=i(1872),w=i(8059),R=i(9715),F=i(3073),U=i(4590),B=i(789),q=i(3525),b=i(3639),Z=i(8295),S=i(7441),O=i(1095),j=i(2458);function Y(e,c){if(1&e&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&e){const a=c.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.descricao," ")}}function Q(e,c){if(1&e&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&e){const a=c.$implicit,o=t.oxw();t.Q6J("value",o.projeto.id),t.xp6(1),t.hij(" ",a.razao," ")}}function H(e,c){1&e&&t._UZ(0,"div",11)}let z=(()=>{class e{constructor(a,o){this.formBuilder=a,this.globalService=o,this.cancelar=new t.vpe,this.ok=new t.vpe,this.projetos=[],this.responsavel=new b.j,this.responsaveis=[],this.atividades=[],this.parametro=a.group({projeto:[{value:""}],responsavel:[{value:""}]}),this.projeto=new q.w,this.responsavel=new b.j,this.responsaveis=[],this.setValue()}ngOnInit(){this.getProjetos(),this.getResponsaveis(),this.setValue()}getProjetos(){this.projetos=[],this.projeto=new q.w,this.projeto.id_empresa=this.globalService.getIdEmpresa(),this.projeto.id=0,this.projeto.descricao="TODOS",this.projetos.push(this.projeto)}getResponsaveis(){this.responsaveis=[],this.responsavel=new b.j,this.responsavel.id_empresa=this.globalService.getIdEmpresa(),this.responsavel.id=0,this.responsavel.razao="TODOS",this.responsaveis.push(this.responsavel)}setValue(){this.parametro.setValue({projeto:this.projeto.id,responsavel:this.responsavel.id})}onCancelar(){this.cancelar.emit("")}onOK(){this.retorno.setId_Atividade(10),this.ok.emit("")}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(l.qu),t.Y36(U.U))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-show-atividades-data"]],inputs:{retorno:"retorno"},outputs:{cancelar:"Cancelar",ok:"Ok"},decls:21,vars:4,consts:[["autocomplete","off",3,"formGroup"],[1,"col-med-2"],["field","","appearance","outline",1,"col-max"],["formControlName","projeto"],[3,"value",4,"ngFor","ngForOf"],["formControlName","responsavel"],[1,"button-container-right"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],["class","listagem",4,"ngIf"],[3,"value"],[1,"listagem"]],template:function(a,o){1&a&&(t.TgZ(0,"h3"),t._uU(1,"Pesquisa De Atividades"),t.qZA(),t.TgZ(2,"div"),t.TgZ(3,"form",0),t.TgZ(4,"div",1),t.TgZ(5,"mat-form-field",2),t.TgZ(6,"mat-label"),t._uU(7,"Contratos"),t.qZA(),t.TgZ(8,"mat-select",3),t.YNc(9,Y,2,2,"mat-option",4),t.qZA(),t.qZA(),t.TgZ(10,"mat-form-field",2),t.TgZ(11,"mat-label"),t._uU(12,"Respons\xe1vel"),t.qZA(),t.TgZ(13,"mat-select",5),t.YNc(14,Q,2,2,"mat-option",4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",6),t.TgZ(16,"button",7),t.NdJ("click",function(){return o.onOK()}),t._uU(17,"Pesquisar"),t.qZA(),t.TgZ(18,"button",8),t.NdJ("click",function(){return o.onCancelar()}),t._uU(19,"Cancelar"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(20,H,1,0,"div",9)),2&a&&(t.xp6(3),t.Q6J("formGroup",o.parametro),t.xp6(6),t.Q6J("ngForOf",o.projetos),t.xp6(5),t.Q6J("ngForOf",o.responsaveis),t.xp6(6),t.Q6J("ngIf",o.atividades.length>0))},directives:[l._Y,l.JL,l.sg,Z.KE,Z.hX,S.gD,l.JJ,l.u,u.sg,O.lW,u.O5,j.ey],styles:[""]}),e})();var K=i(2522),V=i(1436),W=i(6627),G=i(9983),C=i(3220),P=i(2559),X=i(7539),tt=i(1790),at=i(1554);function ot(e,c){if(1&e){const a=t.EpF();t.TgZ(0,"app-show-atividades-data",3),t.NdJ("Cancelar",function(){return t.CHM(a),t.oxw().onCancelarAtividades()})("Ok",function(){return t.CHM(a),t.oxw().onOkAtividades()}),t.qZA()}if(2&e){const a=t.oxw();t.Q6J("retorno",a.retornoAtividades)}}function et(e,c){if(1&e&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&e){const a=c.$implicit;t.Q6J("value",a.id),t.xp6(1),t.AsE(" ",a.id_projeto,"-",a.estru_descri," ")}}function it(e,c){if(1&e){const a=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",4),t.TgZ(2,"mat-toolbar"),t.TgZ(3,"span",5),t._uU(4),t.qZA(),t.TgZ(5,"button",6),t.NdJ("click",function(){t.CHM(a);const s=t.oxw();return s.adicao(s.getAcoes().Inclusao)}),t.TgZ(6,"mat-icon"),t._uU(7,"add_circle_outline"),t.qZA(),t.qZA(),t.TgZ(8,"button",7),t.NdJ("click",function(){return t.CHM(a),t.oxw().onRetorno()}),t.TgZ(9,"mat-icon"),t._uU(10,"arrow_back"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div"),t.TgZ(12,"form",8),t.TgZ(13,"div",9),t.TgZ(14,"mat-form-field",10),t.TgZ(15,"mat-label"),t._uU(16,"Usu\xe1rio:"),t.qZA(),t._UZ(17,"input",11),t.qZA(),t.TgZ(18,"mat-form-field",10),t.TgZ(19,"mat-label"),t._uU(20,"Data:"),t.qZA(),t.TgZ(21,"input",12),t.NdJ("dateChange",function(){return t.CHM(a),t.oxw().onParametrosChange()}),t.qZA(),t._UZ(22,"mat-datepicker-toggle",13),t._UZ(23,"mat-datepicker",null,14),t.qZA(),t.qZA(),t.TgZ(25,"div",15),t.TgZ(26,"mat-form-field",16),t.TgZ(27,"mat-label"),t._uU(28,"Atividades"),t.qZA(),t.TgZ(29,"mat-select",17),t.NdJ("selectionChange",function(){return t.CHM(a),t.oxw().onParametrosChange()}),t.YNc(30,et,2,3,"mat-option",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const a=t.MAs(24),o=t.oxw();t.xp6(4),t.Oqu(o.getTitulo()),t.xp6(8),t.Q6J("formGroup",o.parametro),t.xp6(9),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(8),t.Q6J("ngForOf",o.atividades)}}function nt(e,c){if(1&e&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&e){const a=c.$implicit;t.Q6J("value",a.codigo),t.xp6(1),t.hij(" ",a.motivo," ")}}function st(e,c){if(1&e&&(t.TgZ(0,"mat-form-field",16),t.TgZ(1,"mat-label"),t._uU(2,"Motivo"),t.qZA(),t.TgZ(3,"mat-select",33),t.YNc(4,nt,2,2,"mat-option",18),t.qZA(),t.qZA()),2&e){const a=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",a.motivos)}}function rt(e,c){if(1&e){const a=t.EpF();t.TgZ(0,"form",8),t.TgZ(1,"div",4),t.TgZ(2,"mat-toolbar"),t.TgZ(3,"span",5),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"div",20),t.TgZ(6,"mat-form-field",10),t.TgZ(7,"mat-label"),t._uU(8,"Entrada"),t.qZA(),t._UZ(9,"input",21),t.qZA(),t.TgZ(10,"mat-form-field",10),t.TgZ(11,"mat-label"),t._uU(12,"Sa\xedda"),t.qZA(),t._UZ(13,"input",22),t.qZA(),t.TgZ(14,"mat-form-field",23),t.TgZ(15,"mat-label"),t._uU(16,"Atividade"),t.qZA(),t._UZ(17,"input",24),t.qZA(),t.TgZ(18,"div",25),t.TgZ(19,"mat-checkbox",26),t._uU(20,"Encerrar Atividade"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",15),t.TgZ(22,"mat-form-field",10),t.TgZ(23,"mat-label"),t._uU(24,"Cliente"),t.qZA(),t._UZ(25,"input",27),t.qZA(),t.qZA(),t.TgZ(26,"div",15),t.YNc(27,st,5,1,"mat-form-field",28),t.qZA(),t.TgZ(28,"div",15),t.TgZ(29,"mat-form-field",10),t.TgZ(30,"mat-label"),t._uU(31,"Observa\xe7\xe3o"),t.qZA(),t._UZ(32,"input",29),t.qZA(),t.qZA(),t.TgZ(33,"div",30),t.TgZ(34,"button",31),t.NdJ("click",function(){return t.CHM(a),t.oxw().onSubmit()}),t._uU(35),t.qZA(),t.TgZ(36,"button",32),t.NdJ("click",function(){return t.CHM(a),t.oxw().onCancel()}),t._uU(37),t.qZA(),t.qZA(),t.qZA()}if(2&e){const a=t.oxw();t.Q6J("formGroup",a.formulario),t.xp6(4),t.Oqu(a.labelCadastro),t.xp6(5),t.Q6J("readonly",a.readOnly),t.xp6(4),t.Q6J("readonly",a.readOnly),t.xp6(6),t.Q6J("disableRipple",!1),t.xp6(8),t.Q6J("ngIf",a.idAcao!=a.getAcoes().Consulta&&a.idAcao!=a.getAcoes().Exclusao),t.xp6(5),t.Q6J("readonly",a.readOnly),t.xp6(3),t.Oqu(a.acao),t.xp6(2),t.Oqu(a.getLabelCancel())}}function ct(e,c){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"div",37),t.TgZ(2,"mat-label",38),t._uU(3,"Hor\xe1rio:"),t.qZA(),t.TgZ(4,"mat-label",39),t._uU(5),t.ALo(6,"date"),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"mat-label",38),t._uU(9,"Hora Apontadas:"),t.qZA(),t.TgZ(10,"mat-label",39),t._uU(11),t.ALo(12,"horaSexagenal"),t.qZA(),t.qZA(),t.TgZ(13,"div",37),t.TgZ(14,"mat-label",40),t._uU(15,"Contrato:"),t.qZA(),t.TgZ(16,"mat-label",39),t._uU(17),t.qZA(),t.qZA(),t.TgZ(18,"div",37),t.TgZ(19,"mat-label",38),t._uU(20,"Atividade:"),t.qZA(),t.TgZ(21,"mat-label",39),t._uU(22),t.qZA(),t.qZA(),t.TgZ(23,"div",37),t.TgZ(24,"mat-label",38),t._uU(25,"Obs.::"),t.qZA(),t.TgZ(26,"mat-label",39),t._uU(27),t.qZA(),t.qZA(),t.qZA()),2&e){const a=c.$implicit,o=t.oxw(2);t.xp6(5),t.AsE("",t.xi3(6,8,a.inicial,"HH:mm")," as ",t.xi3(7,11,a.final,"HH:mm"),""),t.xp6(6),t.Oqu(t.lcZ(12,14,a.horasapon)),t.xp6(3),t.Q6J("matTooltip",o.showDadosProjetoAgendamento(a)),t.xp6(3),t.AsE("",a.id_projeto,"-",a.projeto_descricao,""),t.xp6(5),t.Oqu(a.estru_descricao),t.xp6(5),t.Oqu(a.obs)}}function lt(e,c){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"mat-label"),t._uU(2,"Nenhum Planejamento Para Esta Data"),t.qZA(),t.qZA())}function dt(e,c){if(1&e){const a=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",37),t.TgZ(2,"mat-label",38),t._uU(3,"Hor\xe1rio:"),t.qZA(),t.TgZ(4,"mat-label",39),t._uU(5),t.ALo(6,"date"),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"mat-label",38),t._uU(9,"Hora Apontadas:"),t.qZA(),t.TgZ(10,"mat-label",39),t._uU(11),t.ALo(12,"horaSexagenal"),t.qZA(),t.TgZ(13,"button",41),t.NdJ("click",function(){const v=t.CHM(a).$implicit,g=t.oxw(2);return g.outras(g.getAcoes().Edicao,v)}),t.TgZ(14,"mat-icon"),t._uU(15,"edit"),t.qZA(),t.qZA(),t.TgZ(16,"button",42),t.NdJ("click",function(){const v=t.CHM(a).$implicit,g=t.oxw(2);return g.outras(g.getAcoes().Exclusao,v)}),t.TgZ(17,"mat-icon"),t._uU(18,"delete"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",37),t.TgZ(20,"mat-label",40),t._uU(21,"Projeto:"),t.qZA(),t.TgZ(22,"mat-label",39),t._uU(23),t.qZA(),t.qZA(),t.TgZ(24,"div",37),t.TgZ(25,"mat-label",38),t._uU(26,"Atividade:"),t.qZA(),t.TgZ(27,"mat-label",39),t._uU(28),t.qZA(),t.qZA(),t.TgZ(29,"div",37),t.TgZ(30,"mat-label",38),t._uU(31,"Encerrou Atividade ?:"),t.qZA(),t.TgZ(32,"mat-label",39),t._uU(33),t.ALo(34,"simNao"),t.qZA(),t.qZA(),t.TgZ(35,"div",37),t.TgZ(36,"mat-label",38),t._uU(37,"Motivo:"),t.qZA(),t.TgZ(38,"mat-label",39),t._uU(39),t.qZA(),t.qZA(),t.TgZ(40,"div",37),t.TgZ(41,"mat-label",38),t._uU(42,"Produtivo:"),t.qZA(),t.TgZ(43,"mat-label",39),t._uU(44),t.qZA(),t.qZA(),t.TgZ(45,"div",37),t.TgZ(46,"mat-label",38),t._uU(47,"Obs.::"),t.qZA(),t.TgZ(48,"mat-label",39),t._uU(49),t.qZA(),t.qZA(),t.qZA()}if(2&e){const a=c.$implicit,o=t.oxw(2);t.xp6(5),t.AsE("",t.xi3(6,11,a.inicial,"HH:mm")," as ",t.xi3(7,14,a.final,"HH:mm"),""),t.xp6(6),t.Oqu(t.lcZ(12,17,a.horasapon)),t.xp6(9),t.Q6J("matTooltip",o.showDadosProjetoApontamento(a)),t.xp6(3),t.AsE("",a.id_projeto,"-",a.proj_descricao,""),t.xp6(5),t.Oqu(a.estru_descricao),t.xp6(5),t.Oqu(t.lcZ(34,19,a.encerramento)),t.xp6(6),t.Oqu(a.motivo_descricao),t.xp6(5),t.Oqu(a.motivo_produtivo),t.xp6(5),t.Oqu(a.obs)}}function ut(e,c){1&e&&(t.TgZ(0,"div"),t.TgZ(1,"mat-label"),t._uU(2,"Nenhum Apontamento Para Esta Data"),t.qZA(),t.qZA())}function pt(e,c){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"table"),t.TgZ(2,"tr",34),t.TgZ(3,"th"),t._uU(4,"PLANEJADO"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"EXECUTADO"),t.qZA(),t.qZA(),t.TgZ(7,"tr"),t.TgZ(8,"td",35),t.YNc(9,ct,28,16,"div",36),t.YNc(10,lt,3,0,"div",1),t.qZA(),t.TgZ(11,"td",35),t.YNc(12,dt,50,21,"div",36),t.YNc(13,ut,3,0,"div",1),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const a=t.oxw();t.xp6(9),t.Q6J("ngForOf",a.agendamentos),t.xp6(1),t.Q6J("ngIf",0==a.agendamentos.length),t.xp6(2),t.Q6J("ngForOf",a.apontamentos),t.xp6(1),t.Q6J("ngIf",0==a.apontamentos.length)}}const mt=[{path:"",redirectTo:"execucao",pathMatch:"full"},{path:"execucao",component:(()=>{class e{constructor(a,o,s,v,g,f,x,T,At){this.usuariosService=o,this.aponPlanejamentoService=s,this.aponExecucaoService=v,this.atividadesService=g,this.motivoApoService=f,this.globalService=x,this.router=T,this.appSnackBar=At,this.durationInSeconds=2,this.agendamento=new _.Y,this.idAcao=0,this.acao="",this.labelCadastro="",this.id_empresa=0,this.apontamentos=[],this.apontamento=new d,this.agendamentos=[],this.atividades=[],this.atividade=new N.o,this.motivos=[],this.dados_projetos="Ol\xe1",this.usuario=new E.g,this.filtro=!1,this.intervalos=[],this.readOnly=!0,this.showAtividades=!1,this.retornoAtividades=new J(0,0,new Date),this.formulario=a.group({entrada:[{value:""},[l.kI.required]],saida:[{value:""},[l.kI.required]],atividade:[{value:""},[l.kI.required]],cliente:[{value:""},[l.kI.required]],id_motivo:[{value:""},[l.kI.required]],encerra:[{value:""},[l.kI.required]],obs:[{value:""},[l.kI.maxLength(50)]]}),this.parametro=a.group({usuario:[{value:""}],data:[{value:""}],id_atividade:[{value:""},[l.kI.required,l.kI.min(1)]]}),this.getUsuario(),this.setValue(),this.idAcao=99,this.setAcao(this.idAcao),this.setValue(),this.setParametro()}ngOnInit(){}ngOnDestroy(){var a,o,s,v,g,f,x,T;null===(a=this.inscricaoGetAll)||void 0===a||a.unsubscribe(),null===(o=this.inscricaoAcao)||void 0===o||o.unsubscribe(),null===(s=this.inscricaoUsuario)||void 0===s||s.unsubscribe(),null===(v=this.inscricaoApontamento)||void 0===v||v.unsubscribe(),null===(g=this.inscricaoAponExecucao)||void 0===g||g.unsubscribe(),null===(f=this.inscricaoAtividades)||void 0===f||f.unsubscribe(),null===(x=this.inscricaoMotivos)||void 0===x||x.unsubscribe(),null===(T=this.inscricaoCoordenador)||void 0===T||T.unsubscribe()}getUsuario(){this.inscricaoUsuario=this.usuariosService.getUsuario(this.globalService.getIdEmpresa(),this.globalService.getUsuario().id).subscribe(a=>{this.usuario=a,this.parametro.patchValue({usuario:this.usuario.razao}),this.getAtividades(),this.getMotivos()},a=>{this.usuario=new E.g,console.log(a),this.appSnackBar.openFailureSnackBar(`${a.error.tabela} - ${a.error.erro} - ${a.error.message}`,"OK")})}getApontamentosPlanejamento(){let a=new $.W;a.id_empresa=this.usuario.id_empresa,a.id_exec=this.usuario.id,a.data=(0,r.JS)(this.parametro.value.data),a.orderby="Executor",this.inscricaoAponExecucao=this.aponPlanejamentoService.getApoPlanejamentos_01(a).subscribe(o=>{this.agendamentos=o},o=>{this.agendamentos=[]})}getApontamentosExecucao(){let a=new y.W;a.id_empresa=1,a.id_exec=this.usuario.id,a.id_projeto=this.atividade.id_projeto,a.data=(0,r.JS)(this.parametro.value.data),a.orderby="Executor",this.inscricaoAponExecucao=this.aponExecucaoService.getApoExecucoes_01(a).subscribe(o=>{this.apontamentos=o},o=>{this.apontamentos=[]})}getAtividades(){let a=new I.l;a.id_empresa=1,a.id_exec=this.usuario.id,a.so_abertas_ex="S",a.tipo="O",a.orderby="projeto",this.inscricaoAtividades=this.atividadesService.getAtividades_01(a).subscribe(o=>{this.atividades=o,console.log(this.atividades)},o=>{this.atividades=[]})}getMotivos(){let a=new D.V;a.id_empresa=1,a.analitico="S",a.orderby="C\xf3digo",this.inscricaoAponExecucao=this.motivoApoService.getMotivoApos_01(a).subscribe(o=>{this.motivos=o},o=>{this.motivos=[],this.appSnackBar.openFailureSnackBar(`${o.error.tabela} - ${o.error.erro} - ${o.error.message}`,"OK")})}setValue(){this.formulario.setValue({entrada:this.apontamento.inicial.substring(this.apontamento.inicial.indexOf(" ")+1,16),saida:this.apontamento.final.substring(this.apontamento.final.indexOf(" ")+1,16),atividade:this.apontamento.estru_descricao,cliente:this.atividade.subcliente_razao,id_motivo:this.apontamento.id_motivo,encerra:"S"==this.apontamento.encerramento,obs:this.apontamento.obs})}setParametro(){this.parametro.setValue({usuario:this.usuario.razao,data:new Date,id_atividade:0})}setAcao(a){switch(+a){case n.I.Inclusao:this.acao="Gravar",this.labelCadastro=`Inclus\xe3o - ${(0,r.qS)(this.apontamento.inicial)}`,this.readOnly=!1;break;case n.I.Edicao:this.acao="Gravar",this.labelCadastro=`Altera\xe7\xe3o - ${(0,r.qS)(this.apontamento.inicial)}`,this.readOnly=!1;break;case n.I.Consulta:this.acao="Voltar",this.labelCadastro=`Consulta - ${(0,r.qS)(this.apontamento.inicial)}`,this.readOnly=!0;break;case n.I.Exclusao:this.acao="Excluir",this.labelCadastro=`Exclus\xe3o - ${(0,r.qS)(this.apontamento.inicial)}`,this.readOnly=!0;break;default:this.acao="",this.labelCadastro=""}}onRetorno(){this.router.navigate(["/"])}setFiltro(){this.filtro=!this.filtro}onSubmit(){try{(this.idAcao==n.I.Inclusao||this.idAcao==n.I.Edicao)&&(console.log("Edi\xe7\xe3o =>",this.intervalos,this.formulario.value.entrada,this.formulario.value.saida),(0,r.yQ)(this.intervalos,this.formulario.value.entrada,this.formulario.value.saida)),this.formulario.valid?this.executaAcao():this.appSnackBar.openSuccessSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK")}catch(a){a instanceof L.i?this.appSnackBar.openSuccessSnackBar(`Lan\xe7amento Conflitando: ${a.message}`,"OK"):console.log(a)}}onRefresh(){this.parametro.valid?(this.atividade=this.atividades.filter(a=>a.id===this.parametro.value.id_atividade)[0],this.getApontamentosPlanejamento(),this.getApontamentosExecucao()):this.appSnackBar.openSuccessSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK")}adicao(a){this.parametro.valid?(this.apontamento=new d,new Date((0,r.mu)((0,r.JS)(this.parametro.value.data)+" 00:00:00")),this.intervalos=(0,r.T7)(this.apontamentos,this.apontamento.id),console.log("Intervalos Adicao ==>",this.intervalos),this.apontamento.id_empresa=this.usuario.id_empresa,this.apontamento.id=0,this.apontamento.id_projeto=this.atividade.id_projeto,this.apontamento.id_conta=this.atividade.conta,this.apontamento.id_subconta=this.atividade.subconta,this.apontamento.id_resp=this.atividade.id_resp,this.apontamento.id_exec=this.atividade.id_exec,this.apontamento.inicial=(0,r.mu)((0,r.JS)(this.parametro.value.data)+" 00:00:00"),this.apontamento.final=(0,r.mu)((0,r.JS)(this.parametro.value.data)+" 00:00:00"),this.apontamento.horasapon=0,this.apontamento.obs="",this.apontamento.encerramento="N",this.apontamento.user_insert=this.usuario.id,this.apontamento.user_update=0,this.apontamento.resp_razao=this.atividade.resp_razao,this.apontamento.exec_razao=this.atividade.exec_razao,this.apontamento.estru_descricao=this.atividade.estru_descri,this.idAcao=a,this.setAcao(this.idAcao),this.setValue(),console.log("inicial",this.apontamento.inicial),console.log("final",this.apontamento.final)):this.appSnackBar.openSuccessSnackBar("Definina uma ativadade primeiro","OK")}outras(a,o){this.apontamento=o,this.intervalos=(0,r.T7)(this.apontamentos,this.apontamento.id),this.idAcao=a,this.setAcao(this.idAcao),this.setValue()}executaAcao(){var a=this;let o=new Date;switch(o.setTime(Date.parse(this.apontamento.inicial)),this.apontamento.inicial=(0,r.B9)(o,(0,r.Lv)(this.formulario.value.entrada),(0,r.lj)(this.formulario.value.entrada)),this.apontamento.final=(0,r.B9)(o,(0,r.Lv)(this.formulario.value.saida),(0,r.lj)(this.formulario.value.saida)),this.apontamento.horasapon=(0,r.KB)((0,r.Hh)(this.apontamento.inicial,this.apontamento.final)),this.apontamento.id_motivo=this.formulario.value.id_motivo,this.apontamento.obs=this.formulario.value.obs,this.apontamento.encerramento=this.formulario.value.encerra?"S":"N",+this.idAcao){case n.I.Inclusao:this.apontamento.user_insert=this.globalService.getUsuario().id,this.inscricaoAcao=this.aponExecucaoService.ApoExecucaoInsert(this.apontamento).subscribe(function(){var s=(0,p.Z)(function*(v){a.getApontamentosExecucao(),a.onCancel()});return function(v){return s.apply(this,arguments)}}(),s=>{console.log("erro=>",s),this.appSnackBar.openFailureSnackBar(`${s.error.tabela} - ${s.error.erro} - ${s.error.message}`,"OK")});break;case n.I.Edicao:this.apontamento.user_update=this.globalService.getUsuario().id,this.inscricaoAcao=this.aponExecucaoService.ApoExecucaoUpdate(this.apontamento).subscribe(function(){var s=(0,p.Z)(function*(v){a.getApontamentosExecucao(),a.onCancel()});return function(v){return s.apply(this,arguments)}}(),s=>{console.log("Error",s.error),this.appSnackBar.openFailureSnackBar(`${s.error.tabela} - ${s.error.erro} - ${s.error.message}`,"OK")});break;case n.I.Exclusao:this.inscricaoAcao=this.aponExecucaoService.ApoExecucaoDelete(this.apontamento.id_empresa,this.apontamento.id).subscribe(function(){var s=(0,p.Z)(function*(v){a.getApontamentosExecucao(),a.onCancel()});return function(v){return s.apply(this,arguments)}}(),s=>{this.appSnackBar.openFailureSnackBar(`Erro Na Exclusao ${s.error.tabela} - ${s.error.erro} - ${s.error.message}`,"OK")})}}onCancel(){this.idAcao=99,this.setAcao(99)}getLabelCancel(){return this.idAcao==n.I.Consulta?"Voltar":"Cancelar"}getAcoes(){return n.I}touchedOrDirty(a){var o,s;return!(!(null===(o=this.formulario.get(a))||void 0===o?void 0:o.touched)&&!(null===(s=this.formulario.get(a))||void 0===s?void 0:s.dirty))}getTexto(){return r.fd}onParametrosChange(){this.onRefresh()}getTitulo(){return 0!==this.atividade.id?`Projeto: ${this.atividade.id_projeto} Atividade: ${this.atividade.estru_descri}`:"Apontamentos de execu\xe7\xe3o"}showDadosProjetoAgendamento(a){let o="";return o=`Projeto: ${a.id_projeto} Diretor: ${a.diretor_razao} Resp.: ${a.resp_razao}`,o}showDadosProjetoApontamento(a){let o="";return o=`Projeto: ${a.id_projeto} Descricao: ${a.proj_descricao} Resp.: ${a.resp_razao}`,o}onShowAtividades(){this.showAtividades=!this.showAtividades}onCancelarAtividades(){var a;console.log("Cancelada consulta",null===(a=this.retornoAtividades)||void 0===a?void 0:a.getId_Atividade()),this.onShowAtividades()}onOkAtividades(){var a;console.log("Confirmada Consulta",null===(a=this.retornoAtividades)||void 0===a?void 0:a.getId_Atividade()),this.onShowAtividades()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(l.qu),t.Y36(M.J),t.Y36(k.G),t.Y36(w.A),t.Y36(R.a),t.Y36(F.s),t.Y36(U.U),t.Y36(h.F0),t.Y36(B.W))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-crud-execucao-lancamento"]],decls:4,vars:4,consts:[[3,"retorno","Cancelar","Ok",4,"ngIf"],[4,"ngIf"],["autocomplete","off",3,"formGroup",4,"ngIf"],[3,"retorno","Cancelar","Ok"],[1,"div-barra"],[1,"example-spacer"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Novo Apontamento","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon",1,"example-icon",3,"click"],["autocomplete","off",3,"formGroup"],[1,"col-med-2"],["appearance","outline",1,"col-max"],["matInput","","formControlName","usuario","readonly","true"],["matInput","","formControlName","data",3,"matDatepicker","dateChange"],["matSuffix","",3,"for"],["dataDatePicker",""],[1,"col-med-1"],["field","","appearance","outline",1,"col-max"],["formControlName","id_atividade",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"col-med-5"],["matInput","","autofocus","","formControlName","entrada","placeholder","HH:MM","mask","00:00",3,"readonly"],["matInput","","formControlName","saida","placeholder","HH:MM","mask","00:00",3,"readonly"],["appearance","outline",1,"col-max","column-span-2"],["matInput","","formControlName","atividade","readonly","true","tabindex","-1"],[1,"col-max"],["formControlName","encerra",1,"encerramento",3,"disableRipple"],["matInput","","formControlName","cliente","readonly","true","tabindex","-1"],["field","","appearance","outline","class","col-max",4,"ngIf"],["matInput","","formControlName","obs","oninput","this.value = this.value.toUpperCase()",3,"readonly"],[1,"button-container-right"],["mat-raised-button","","color","primary",1,"buttons",3,"click"],["mat-raised-button","","color","accent",1,"buttons",3,"click"],["formControlName","id_motivo"],[1,"coluna-cabec"],[1,"coluna-descricao"],[4,"ngFor","ngForOf"],[1,"coluna-descricao","cor-blue"],[1,"labelTitle"],[1,"labelData"],["matTooltipPosition","above",1,"labelTitle",3,"matTooltip"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Alterar Apontamento","matTooltipPosition","above",1,"example-icon",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Excluir Apontamento","matTooltipPosition","above",1,"example-icon",3,"click"]],template:function(a,o){1&a&&(t.YNc(0,ot,1,1,"app-show-atividades-data",0),t.YNc(1,it,31,5,"div",1),t.YNc(2,rt,38,9,"form",2),t.YNc(3,pt,14,4,"div",1)),2&a&&(t.Q6J("ngIf",o.showAtividades),t.xp6(1),t.Q6J("ngIf",99==o.idAcao&&!o.showAtividades),t.xp6(1),t.Q6J("ngIf",99!==o.idAcao),t.xp6(1),t.Q6J("ngIf",99==o.idAcao&&!o.showAtividades))},directives:[u.O5,z,K.Ye,O.lW,V.gM,W.Hw,l._Y,l.JL,l.sg,Z.KE,Z.hX,G.Nt,l.Fj,l.JJ,l.u,C.hl,C.nW,Z.R9,C.Mq,S.gD,u.sg,j.ey,P.hx,X.oG],pipes:[u.uU,tt.X,at.r],styles:[".button[_ngcontent-%COMP%]{margin-top:3%}table[_ngcontent-%COMP%]{width:100%;cursor:pointer}.coluna-codigo[_ngcontent-%COMP%]{background-color:#878684;text-align:center;font-weight:bolder}.coluna-descricao[_ngcontent-%COMP%]{background-color:#a9ad9e}.coluna-acao[_ngcontent-%COMP%]{background-color:#e1e7d3;text-align:center;font-weight:400}.coluna-cabec[_ngcontent-%COMP%]{background-color:#e3bd11;font-size:large;text-align:center}.encerramento[_ngcontent-%COMP%]{margin-top:20px}"]}),e})()}];let ht=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[h.Bz.forChild(mt)],h.Bz]}),e})();var vt=i(3122),_t=i(4466);let gt=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.ez,ht,vt.q,l.u5,l.UX,_t.m,P.yI.forChild()]]}),e})()},4878:(A,m,i)=>{i.d(m,{W:()=>u});class u{constructor(){this.id_empresa=0,this.id=0,this.id_projeto=0,this.id_conta="",this.id_versao="",this.id_subconta="",this.id_resp=0,this.id_exec=0,this.data="",this.orderby="",this.sharp=!0}}},9648:(A,m,i)=>{i.d(m,{W:()=>u});class u{constructor(){this.id_empresa=0,this.id="",this.id_projeto=0,this.id_conta="",this.id_subconta="",this.id_resp=0,this.id_exec=0,this.data="",this.orderby="",this.sharp=!0}}},8059:(A,m,i)=>{i.d(m,{A:()=>l});var u=i(2340),h=i(7716),p=i(1841);let l=(()=>{class d{constructor(n){this.http=n,this.apiURL=u.N.apiURL}getApoExecucao(n,r){return this.http.get(`${this.apiURL}aponexec/${n}/${r}`)}getApoExecucaos(){return this.http.get(`${this.apiURL}aponexec`)}getApoExecucoes_01(n){return this.http.post(`${this.apiURL}aponexecs`,n)}ApoExecucaoInsert(n){return this.http.post(`${this.apiURL}aponexec`,n)}ApoExecucaoUpdate(n){return this.http.put(`${this.apiURL}aponexec`,n)}ApoExecucaoDelete(n,r){return this.http.delete(`${this.apiURL}aponexec/${n}/${r}`)}}return d.\u0275fac=function(n){return new(n||d)(h.LFG(p.eN))},d.\u0275prov=h.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},1872:(A,m,i)=>{i.d(m,{G:()=>l});var u=i(2340),h=i(7716),p=i(1841);let l=(()=>{class d{constructor(n){this.http=n,this.apiURL=u.N.apiURL}getApoPlanejamento(n,r){return this.http.get(`${this.apiURL}aponplan/${n}/${r}`)}getApoPlanejamentos(){return this.http.get(`${this.apiURL}aponplans`)}getApoPlanejamentos_01(n){return this.http.post(`${this.apiURL}aponplans`,n)}getAponAgendaPlanejamentos(n){return this.http.post(`${this.apiURL}aponagenda`,n)}getAponAgendaPlanejamentosV2(n){return this.http.post(`${this.apiURL}aponagenda`,n)}postPlanejamento(n){return this.http.post(`${this.apiURL}planejamento`,n)}ApoPlanejamentoInsert(n){return this.http.post(`${this.apiURL}aponplan`,n)}ApoPlanejamentoUpdate(n){return this.http.put(`${this.apiURL}aponplan`,n)}ApoPlanejamentoDelete(n,r){return this.http.delete(`${this.apiURL}aponplan/${n}/${r}`)}}return d.\u0275fac=function(n){return new(n||d)(h.LFG(p.eN))},d.\u0275prov=h.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},1790:(A,m,i)=>{i.d(m,{X:()=>h});var u=i(7716);let h=(()=>{class p{transform(d){let _=Number(d).toFixed(2),n=_.substring(0,_.indexOf(".")),r=_.substring(_.indexOf(".")+1);return r="00"+(Number.parseInt(r)/1.67).toFixed(0).trim(),r=r.substring(r.length-2),r.length<2&&(r="0"+r),n+":"+r}}return p.\u0275fac=function(d){return new(d||p)},p.\u0275pipe=u.Yjl({name:"horaSexagenal",type:p,pure:!0}),p})()},1554:(A,m,i)=>{i.d(m,{r:()=>h});var u=i(7716);let h=(()=>{class p{transform(d){let _="N\xe3o";return _="S"==d?"Sim":"N\xe3o",_}}return p.\u0275fac=function(d){return new(d||p)},p.\u0275pipe=u.Yjl({name:"simNao",type:p,pure:!0}),p})()}}]);