"use strict";(self.webpackChunktimer=self.webpackChunktimer||[]).push([[379],{379:(K,Z,i)=>{i.r(Z),i.d(Z,{GruUserModule:()=>j});var d=i(8583),p=i(4655),_=i(7117),u=i(3032);class x{constructor(){this.id_empresa=0,this.id=0,this.grupo=0,this.pagina=1,this.tamPagina=50,this.contador="N",this.orderby="",this.sharp=!1}}var o=i(7716),n=i(3679),b=i(7006),T=i(9189),C=i(789),A=i(2522),U=i(1095),q=i(1436),G=i(6627),m=i(8295),y=i(7441),S=i(9983),I=i(2458),h=i(3738);function O(r,s){if(1&r&&(o.TgZ(0,"mat-option",15),o._uU(1),o.qZA()),2&r){const t=s.$implicit;o.Q6J("value",t),o.xp6(1),o.hij(" ",t," ")}}function E(r,s){if(1&r&&(o.TgZ(0,"mat-option",15),o._uU(1),o.qZA()),2&r){const t=s.$implicit;o.Q6J("value",t),o.xp6(1),o.hij(" ",t," ")}}function k(r,s){if(1&r){const t=o.EpF();o.TgZ(0,"mat-card-actions"),o.TgZ(1,"span",22),o.TgZ(2,"button",4),o.NdJ("click",function(){o.CHM(t);const a=o.oxw().$implicit,l=o.oxw();return l.escolha(l.getAcoes().Edicao,a)}),o.TgZ(3,"mat-icon"),o._uU(4,"edit"),o.qZA(),o.qZA(),o.TgZ(5,"button",4),o.NdJ("click",function(){o.CHM(t);const a=o.oxw().$implicit,l=o.oxw();return l.escolha(l.getAcoes().Exclusao,a)}),o.TgZ(6,"mat-icon"),o._uU(7,"delete"),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&r){const t=o.oxw(2);o.xp6(2),o.Q6J("matTooltip",t.getTexto().alterar),o.xp6(3),o.Q6J("matTooltip",t.getTexto().excluir)}}function J(r,s){if(1&r){const t=o.EpF();o.TgZ(0,"div",16),o.TgZ(1,"mat-card",17),o.NdJ("click",function(){const l=o.CHM(t).$implicit,c=o.oxw();return c.escolha(c.getAcoes().Consulta,l)}),o.YNc(2,k,8,2,"mat-card-actions",18),o.TgZ(3,"mat-card-content"),o.TgZ(4,"mat-label",19),o._uU(5,"C\xd3DIGO:"),o.qZA(),o.TgZ(6,"mat-label",20),o._uU(7),o.qZA(),o.TgZ(8,"mat-label",21),o._uU(9,"Raz\xe3o Social:"),o.qZA(),o.TgZ(10,"mat-label",20),o._uU(11),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&r){const t=s.$implicit;o.xp6(2),o.Q6J("ngIf",t.id<900),o.xp6(5),o.Oqu(t.id),o.xp6(4),o.Oqu(t.grupo)}}let N=(()=>{class r{constructor(t,e,a,l,c){this.formBuilder=t,this.globalService=e,this.grupoUserService=a,this.router=l,this.appSnackBar=c,this.grupos=[],this.erro="",this.opcoesOrdenacao=["C\xf3digo","Grupo"],this.opcoesCampo=["C\xf3digo","Grupo"],this.parametros=t.group({ordenacao:[null],campo:[null],filtro:[null]}),this.setValues(),this.getGrupos()}ngOnInit(){this.getGrupos()}ngOnDestroy(){var t,e;null===(t=this.inscricaoGetAll)||void 0===t||t.unsubscribe(),null===(e=this.inscricaoGetFiltro)||void 0===e||e.unsubscribe()}escolha(t,e){this.router.navigate(void 0!==e?["users/user",e.id_empresa,e.id,t]:["users/user",1,0,t])}getAcoes(){return u.I}getGrupos(){let t=new x;if(t.id_empresa=1,"C\xf3digo"==this.parametros.value.campo){let e=parseInt(this.parametros.value.filtro,10);console.log("key",e),t.id=isNaN(e)?0:e}"Grupo"==this.parametros.value.campo&&(t.grupo=this.parametros.value.filtro.toUpperCase()),t.orderby=this.parametros.value.ordenacao,this.globalService.setSpin(!0),this.inscricaoGetFiltro=this.grupoUserService.getGrupoUsers_01(t).subscribe(e=>{this.globalService.setSpin(!1),this.grupos=e},e=>{this.globalService.setSpin(!1),this.grupos=[],this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Grupos de Usu\xe1rios ${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")})}setValues(){this.parametros.setValue({ordenacao:"C\xf3digo",campo:"C\xf3digo",filtro:""})}getTexto(){return _.fd}onHome(){this.router.navigate([""])}}return r.\u0275fac=function(t){return new(t||r)(o.Y36(n.qu),o.Y36(b.U),o.Y36(T.c),o.Y36(p.F0),o.Y36(C.W))},r.\u0275cmp=o.Xpm({type:r,selectors:[["app-crud-grupo-user"]],decls:31,vars:5,consts:[[1,"div-barra"],[1,"example-spacer"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Retorno","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Atualizar","matTooltipPosition","above",1,"example-icon",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above",3,"matTooltip","click"],[1,"parametros"],["autocomplete","off",1,"col-med-4",3,"formGroup"],["field","","appearance","outline",1,"col-max"],["formControlName","ordenacao"],[3,"value",4,"ngFor","ngForOf"],["formControlName","campo"],["appearance","outline",1,"col-max","column-span-2"],["matInput","","formControlName","filtro"],[1,"Browse"],["class","linha",4,"ngFor","ngForOf"],[3,"value"],[1,"linha"],[1,"example-card",3,"click"],[4,"ngIf"],[1,"labelTitleFirst"],[1,"labelData"],[1,"labelTitle"],[1,"button-container-right"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"mat-toolbar"),o.TgZ(2,"span",1),o._uU(3,"Grp de Usu\xe1rios: "),o.qZA(),o.TgZ(4,"button",2),o.NdJ("click",function(){return e.onHome()}),o.TgZ(5,"mat-icon"),o._uU(6,"home"),o.qZA(),o.qZA(),o.TgZ(7,"button",3),o.NdJ("click",function(){return e.getGrupos()}),o.TgZ(8,"mat-icon"),o._uU(9,"rotate_right"),o.qZA(),o.qZA(),o.TgZ(10,"button",4),o.NdJ("click",function(){return e.escolha(e.getAcoes().Inclusao)}),o.TgZ(11,"mat-icon"),o._uU(12,"add_circle_outline"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(13,"div",5),o.TgZ(14,"form",6),o.TgZ(15,"mat-form-field",7),o.TgZ(16,"mat-label"),o._uU(17,"Ordena\xe7\xe3o"),o.qZA(),o.TgZ(18,"mat-select",8),o.YNc(19,O,2,2,"mat-option",9),o.qZA(),o.qZA(),o.TgZ(20,"mat-form-field",7),o.TgZ(21,"mat-label"),o._uU(22,"Pesquisar Por"),o.qZA(),o.TgZ(23,"mat-select",10),o.YNc(24,E,2,2,"mat-option",9),o.qZA(),o.qZA(),o.TgZ(25,"mat-form-field",11),o.TgZ(26,"mat-label"),o._uU(27,"Descri\xe7\xe3o"),o.qZA(),o._UZ(28,"input",12),o.qZA(),o.qZA(),o.qZA(),o.TgZ(29,"div",13),o.YNc(30,J,12,3,"div",14),o.qZA()),2&t&&(o.xp6(10),o.Q6J("matTooltip",e.getTexto().incluir),o.xp6(4),o.Q6J("formGroup",e.parametros),o.xp6(5),o.Q6J("ngForOf",e.opcoesOrdenacao),o.xp6(5),o.Q6J("ngForOf",e.opcoesCampo),o.xp6(6),o.Q6J("ngForOf",e.grupos))},directives:[A.Ye,U.lW,q.gM,G.Hw,n._Y,n.JL,n.sg,m.KE,m.hX,y.gD,n.JJ,n.u,d.sg,S.Nt,n.Fj,I.ey,h.a8,d.O5,h.dn,h.hq],styles:[""]}),r})();var f=i(8239);class v{constructor(){this.id_empresa=0,this.id=0,this.grupo="",this.user_insert=0,this.user_update=0}}var F=i(9267);function D(r,s){if(1&r){const t=o.EpF();o.TgZ(0,"button",12),o.NdJ("click",function(){return o.CHM(t),o.oxw().onSubmit()}),o.TgZ(1,"mat-icon"),o._uU(2,"check"),o.qZA(),o._uU(3),o.qZA()}if(2&r){const t=o.oxw();o.xp6(3),o.hij(" ",t.acao," ")}}function Y(r,s){if(1&r&&(o.TgZ(0,"mat-error"),o._uU(1),o.qZA()),2&r){const t=o.oxw();let e;o.xp6(1),o.Oqu(null==(e=t.formulario.get("grupo"))||null==e.errors?null:e.errors.message)}}const B=[{path:"",redirectTo:"users",pathMatch:"full"},{path:"users",component:N},{path:"user/:id_empresa/:id/:acao",component:(()=>{class r{constructor(t,e,a,l,c,H){this.formBuilder=t,this.grupoEconomicoService=e,this.globalService=a,this.route=l,this.router=c,this.appSnackBar=H,this.grupo=new v,this.acao="Sem Defini\xe7\xe3o",this.idAcao=u.I.Inclusao,this.readOnly=!0,this.durationInSeconds=2,this.labelCadastro="Agenda Do Auditor",this.formulario=t.group({id:[{value:"",disabled:!0}],grupo:[{value:""},[(0,F.S)(3,20,!0)]]}),this.grupo=new v,this.inscricaoRota=l.params.subscribe(g=>{this.grupo.id_empresa=g.id_empresa,this.grupo.id=g.id,this.idAcao=g.acao,this.setAcao(g.acao)})}ngOnInit(){this.idAcao==u.I.Inclusao?(this.grupo=new v,this.grupo.id_empresa=1):this.getGrupo(),this.setValue()}ngOnDestroy(){var t,e,a;null===(t=this.inscricaoGetGrupo)||void 0===t||t.unsubscribe(),null===(e=this.inscricaoRota)||void 0===e||e.unsubscribe(),null===(a=this.inscricaoAcao)||void 0===a||a.unsubscribe()}onSubmit(){this.formulario.valid?this.executaAcao():this.appSnackBar.openFailureSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK")}setValue(){this.formulario.setValue({id:this.grupo.id,grupo:this.grupo.grupo})}getLabelCancel(){return this.idAcao==u.I.Consulta?"Voltar":"Cancelar"}onCancel(){this.router.navigate(["/users/users"])}getGrupo(){this.globalService.setSpin(!0),this.inscricaoGetGrupo=this.grupoEconomicoService.getGrupoUser(this.grupo.id_empresa,this.grupo.id).subscribe(t=>{this.globalService.setSpin(!1),this.grupo=t,this.setValue()},t=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Grupos De Usu\xe1rios ${t.error.tabela} - ${t.error.erro} - ${t.error.message}`,"OK")})}setAcao(t){switch(+t){case u.I.Inclusao:this.acao="Gravar",this.labelCadastro="Grupos De Usu\xe1rios - Inclus\xe3o.",this.readOnly=!1;break;case u.I.Edicao:this.acao="Gravar",this.labelCadastro="Grupos De Usu\xe1rios - Altera\xe7\xe3o.",this.readOnly=!1;break;case u.I.Consulta:this.acao="Voltar",this.labelCadastro="Grupos De Usu\xe1rios - Consulta.",this.readOnly=!0;break;case u.I.Exclusao:this.acao="Excluir",this.labelCadastro="Grupos De Usu\xe1rios - Exclus\xe3o.",this.readOnly=!0}}executaAcao(){var t=this;switch(this.grupo.grupo=this.formulario.value.grupo,+this.idAcao){case u.I.Inclusao:this.globalService.setSpin(!1),this.grupo.user_insert=this.globalService.getUsuario().id,this.inscricaoAcao=this.grupoEconomicoService.GrupoUserInsert(this.grupo).subscribe(function(){var e=(0,f.Z)(function*(a){t.globalService.setSpin(!1),t.onCancel()});return function(a){return e.apply(this,arguments)}}(),e=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Erro Na INclus\xe3o ${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")});break;case u.I.Edicao:this.globalService.setSpin(!0),this.grupo.user_update=this.globalService.getUsuario().id,this.inscricaoAcao=this.grupoEconomicoService.GrupoUserUpdate(this.grupo).subscribe(function(){var e=(0,f.Z)(function*(a){t.globalService.setSpin(!1),t.onCancel()});return function(a){return e.apply(this,arguments)}}(),e=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Erro Na Altera\xe7\xe3o ${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")});break;case u.I.Exclusao:this.globalService.setSpin(!0),this.inscricaoAcao=this.grupoEconomicoService.GrupoUserDelete(this.grupo.id_empresa,this.grupo.id).subscribe(function(){var e=(0,f.Z)(function*(a){t.globalService.setSpin(!1),t.onCancel()});return function(a){return e.apply(this,arguments)}}(),e=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Erro Na Exclusao ${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")})}}getAcoes(){return u.I}touchedOrDirty(t){var e,a;return!(!(null===(e=this.formulario.get(t))||void 0===e?void 0:e.touched)&&!(null===(a=this.formulario.get(t))||void 0===a?void 0:a.dirty))}getValidfield(t){var e,a;return(null===(a=null===(e=this.formulario.get(t))||void 0===e?void 0:e.errors)||void 0===a?void 0:a.ValidatorStringLen)&&this.touchedOrDirty(t)}getMensafield(t){var e,a;return null===(a=null===(e=this.formulario.get(t))||void 0===e?void 0:e.errors)||void 0===a?void 0:a.message}}return r.\u0275fac=function(t){return new(t||r)(o.Y36(n.qu),o.Y36(T.c),o.Y36(b.U),o.Y36(p.gz),o.Y36(p.F0),o.Y36(C.W))},r.\u0275cmp=o.Xpm({type:r,selectors:[["app-gru-user-view"]],decls:22,vars:6,consts:[[1,"div-barra"],[1,"example-spacer"],[1,"button-container-right"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"],["autocomplete","off",3,"formGroup"],[1,"col-med-3"],["appearance","outline",1,"col-max"],["matInput","","formControlName","id"],["appearance","outline",1,"col-max","column-span-2"],["matInput","","formControlName","grupo","oninput","this.value = this.value.toUpperCase()","autofocus","",3,"readonly"],[4,"ngIf"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,e){if(1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"mat-toolbar"),o.TgZ(2,"span",1),o.TgZ(3,"mat-label"),o._uU(4),o.qZA(),o.qZA(),o.TgZ(5,"div",2),o.YNc(6,D,4,1,"button",3),o.TgZ(7,"button",4),o.NdJ("click",function(){return e.onCancel()}),o.TgZ(8,"mat-icon"),o._uU(9,"cancel"),o.qZA(),o._uU(10),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(11,"form",5),o.TgZ(12,"div",6),o.TgZ(13,"mat-form-field",7),o.TgZ(14,"mat-label"),o._uU(15,"C\xd3DIGO"),o.qZA(),o._UZ(16,"input",8),o.qZA(),o.TgZ(17,"mat-form-field",9),o.TgZ(18,"mat-label"),o._uU(19,"Descri\xe7\xe3o Do Grupo"),o.qZA(),o._UZ(20,"input",10),o.YNc(21,Y,2,1,"mat-error",11),o.qZA(),o.qZA(),o.qZA()),2&t){let a;o.xp6(4),o.Oqu(e.labelCadastro),o.xp6(2),o.Q6J("ngIf",3!=e.idAcao),o.xp6(4),o.hij(" ",e.getLabelCancel()," "),o.xp6(1),o.Q6J("formGroup",e.formulario),o.xp6(9),o.Q6J("readonly",e.readOnly),o.xp6(1),o.Q6J("ngIf",(null==(a=e.formulario.get("grupo"))||null==a.errors?null:a.errors.ValidatorStringLen)&&e.touchedOrDirty("grupo"))}},directives:[A.Ye,m.hX,d.O5,U.lW,G.Hw,n._Y,n.JL,n.sg,m.KE,S.Nt,n.Fj,n.JJ,n.u,m.TO],styles:[""]}),r})(),canActivate:[i(1759).C]}];let M=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[[p.Bz.forChild(B)],p.Bz]}),r})();var Q=i(2559),w=i(3122),P=i(4466);let j=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[[d.ez,M,w.q,n.u5,n.UX,P.m,Q.yI.forChild()]]}),r})()}}]);